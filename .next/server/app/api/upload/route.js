"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/upload/route";
exports.ids = ["app/api/upload/route"];
exports.modules = {

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("better-sqlite3");

/***/ }),

/***/ "ffmpeg-static":
/*!********************************!*\
  !*** external "ffmpeg-static" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("ffmpeg-static");

/***/ }),

/***/ "jszip":
/*!************************!*\
  !*** external "jszip" ***!
  \************************/
/***/ ((module) => {

module.exports = require("jszip");

/***/ }),

/***/ "mammoth":
/*!**************************!*\
  !*** external "mammoth" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mammoth");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "onnxruntime-node":
/*!***********************************!*\
  !*** external "onnxruntime-node" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("onnxruntime-node");

/***/ }),

/***/ "pdf-parse":
/*!****************************!*\
  !*** external "pdf-parse" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("pdf-parse");

/***/ }),

/***/ "sharp":
/*!************************!*\
  !*** external "sharp" ***!
  \************************/
/***/ ((module) => {

module.exports = require("sharp");

/***/ }),

/***/ "tesseract.js":
/*!*******************************!*\
  !*** external "tesseract.js" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("tesseract.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "node:child_process":
/*!*************************************!*\
  !*** external "node:child_process" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("node:child_process");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:os":
/*!**************************!*\
  !*** external "node:os" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:os");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "perf_hooks":
/*!*****************************!*\
  !*** external "perf_hooks" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("perf_hooks");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_komar_Desktop_docs_chat_master_docs_chat_master_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/upload/route.ts */ \"(rsc)/./app/api/upload/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/upload/route\",\n        pathname: \"/api/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/upload/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\komar\\\\Desktop\\\\docs-chat-master\\\\docs-chat-master\\\\app\\\\api\\\\upload\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_komar_Desktop_docs_chat_master_docs_chat_master_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/upload/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1cGxvYWQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNrb21hciU1Q0Rlc2t0b3AlNUNkb2NzLWNoYXQtbWFzdGVyJTVDZG9jcy1jaGF0LW1hc3RlciU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDa29tYXIlNUNEZXNrdG9wJTVDZG9jcy1jaGF0LW1hc3RlciU1Q2RvY3MtY2hhdC1tYXN0ZXImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3lDO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jcy1jaGF0LW5leHQvP2VlMTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxca29tYXJcXFxcRGVza3RvcFxcXFxkb2NzLWNoYXQtbWFzdGVyXFxcXGRvY3MtY2hhdC1tYXN0ZXJcXFxcYXBwXFxcXGFwaVxcXFx1cGxvYWRcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VwbG9hZC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VwbG9hZFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdXBsb2FkL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxca29tYXJcXFxcRGVza3RvcFxcXFxkb2NzLWNoYXQtbWFzdGVyXFxcXGRvY3MtY2hhdC1tYXN0ZXJcXFxcYXBwXFxcXGFwaVxcXFx1cGxvYWRcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3VwbG9hZC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/_state.ts":
/*!***************************!*\
  !*** ./app/api/_state.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chunker: () => (/* binding */ chunker),\n/* harmony export */   sessions: () => (/* binding */ sessions),\n/* harmony export */   store: () => (/* binding */ store)\n/* harmony export */ });\n/* harmony import */ var _lib_settings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/settings */ \"(rsc)/./lib/settings.ts\");\n/* harmony import */ var _lib_textChunker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/textChunker */ \"(rsc)/./lib/textChunker.ts\");\n/* harmony import */ var _lib_vectorStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/vectorStore */ \"(rsc)/./lib/vectorStore.ts\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! node:fs */ \"node:fs\");\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(node_fs__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nconst chunker = new _lib_textChunker__WEBPACK_IMPORTED_MODULE_1__.TextChunker(_lib_settings__WEBPACK_IMPORTED_MODULE_0__.settings.MAX_CHUNK_SIZE, _lib_settings__WEBPACK_IMPORTED_MODULE_0__.settings.CHUNK_OVERLAP);\nconst defaultDbPath = process.env.SQLITE_PATH || node_path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"data\", \"index.sqlite\");\ntry {\n    const dir = node_path__WEBPACK_IMPORTED_MODULE_3___default().dirname(defaultDbPath);\n    if (!node_fs__WEBPACK_IMPORTED_MODULE_4___default().existsSync(dir)) {\n        node_fs__WEBPACK_IMPORTED_MODULE_4___default().mkdirSync(dir, {\n            recursive: true\n        });\n    }\n} catch  {}\nconst store = new _lib_vectorStore__WEBPACK_IMPORTED_MODULE_2__.VectorStore(_lib_settings__WEBPACK_IMPORTED_MODULE_0__.settings.EMBEDDING_MODEL, defaultDbPath);\nconst sessions = new Map();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL19zdGF0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTBDO0FBQ007QUFDQTtBQUNuQjtBQUNKO0FBSWxCLE1BQU1LLFVBQVUsSUFBSUoseURBQVdBLENBQUNELG1EQUFRQSxDQUFDTSxjQUFjLEVBQUVOLG1EQUFRQSxDQUFDTyxhQUFhLEVBQUU7QUFDeEYsTUFBTUMsZ0JBQWdCQyxRQUFRQyxHQUFHLENBQUNDLFdBQVcsSUFBSVIscURBQVMsQ0FBQ00sUUFBUUksR0FBRyxJQUFJLFFBQVE7QUFDbEYsSUFBSTtJQUNGLE1BQU1DLE1BQU1YLHdEQUFZLENBQUNLO0lBQ3pCLElBQUksQ0FBQ0oseURBQWEsQ0FBQ1UsTUFBTTtRQUN2QlYsd0RBQVksQ0FBQ1UsS0FBSztZQUFFSSxXQUFXO1FBQUs7SUFDdEM7QUFDRixFQUFFLE9BQU0sQ0FBQztBQUNGLE1BQU1DLFFBQVEsSUFBSWpCLHlEQUFXQSxDQUFDRixtREFBUUEsQ0FBQ29CLGVBQWUsRUFBRVosZUFBZTtBQUN2RSxNQUFNYSxXQUFXLElBQUlDLE1BQTZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jcy1jaGF0LW5leHQvLi9hcHAvYXBpL19zdGF0ZS50cz80YWM2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNldHRpbmdzIH0gZnJvbSBcIkAvbGliL3NldHRpbmdzXCI7XHJcbmltcG9ydCB7IFRleHRDaHVua2VyIH0gZnJvbSBcIkAvbGliL3RleHRDaHVua2VyXCI7XHJcbmltcG9ydCB7IFZlY3RvclN0b3JlIH0gZnJvbSBcIkAvbGliL3ZlY3RvclN0b3JlXCI7XHJcbmltcG9ydCBwYXRoIGZyb20gXCJub2RlOnBhdGhcIjtcclxuaW1wb3J0IGZzIGZyb20gXCJub2RlOmZzXCI7XHJcblxyXG5leHBvcnQgdHlwZSBDaGF0TWVzc2FnZSA9IHsgcm9sZTogXCJ1c2VyXCIgfCBcImFzc2lzdGFudFwiOyBjb250ZW50OiBzdHJpbmcgfTtcclxuXHJcbmV4cG9ydCBjb25zdCBjaHVua2VyID0gbmV3IFRleHRDaHVua2VyKHNldHRpbmdzLk1BWF9DSFVOS19TSVpFLCBzZXR0aW5ncy5DSFVOS19PVkVSTEFQKTtcclxuY29uc3QgZGVmYXVsdERiUGF0aCA9IHByb2Nlc3MuZW52LlNRTElURV9QQVRIIHx8IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCBcImRhdGFcIiwgXCJpbmRleC5zcWxpdGVcIik7XHJcbnRyeSB7XHJcbiAgY29uc3QgZGlyID0gcGF0aC5kaXJuYW1lKGRlZmF1bHREYlBhdGgpO1xyXG4gIGlmICghZnMuZXhpc3RzU3luYyhkaXIpKSB7XHJcbiAgICBmcy5ta2RpclN5bmMoZGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuICB9XHJcbn0gY2F0Y2gge31cclxuZXhwb3J0IGNvbnN0IHN0b3JlID0gbmV3IFZlY3RvclN0b3JlKHNldHRpbmdzLkVNQkVERElOR19NT0RFTCwgZGVmYXVsdERiUGF0aCk7XHJcbmV4cG9ydCBjb25zdCBzZXNzaW9ucyA9IG5ldyBNYXA8c3RyaW5nLCBDaGF0TWVzc2FnZVtdPigpO1xyXG5cclxuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiVGV4dENodW5rZXIiLCJWZWN0b3JTdG9yZSIsInBhdGgiLCJmcyIsImNodW5rZXIiLCJNQVhfQ0hVTktfU0laRSIsIkNIVU5LX09WRVJMQVAiLCJkZWZhdWx0RGJQYXRoIiwicHJvY2VzcyIsImVudiIsIlNRTElURV9QQVRIIiwiam9pbiIsImN3ZCIsImRpciIsImRpcm5hbWUiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwic3RvcmUiLCJFTUJFRERJTkdfTU9ERUwiLCJzZXNzaW9ucyIsIk1hcCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/_state.ts\n");

/***/ }),

/***/ "(rsc)/./app/api/upload/route.ts":
/*!*********************************!*\
  !*** ./app/api/upload/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var node_os__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! node:os */ \"node:os\");\n/* harmony import */ var node_os__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(node_os__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _lib_documentProcessor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/documentProcessor */ \"(rsc)/./lib/documentProcessor.ts\");\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_state */ \"(rsc)/./app/api/_state.ts\");\n/* harmony import */ var _lib_settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/settings */ \"(rsc)/./lib/settings.ts\");\n\n\n\n\n\n\n\nconst runtime = \"nodejs\";\nasync function POST(req) {\n    const form = await req.formData();\n    const file = form.get(\"file\");\n    if (!file) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        detail: \"file is required\"\n    }, {\n        status: 400\n    });\n    const ext = (file.name || \"\").toLowerCase().slice(file.name.lastIndexOf(\".\"));\n    const allowed = [\n        \".pdf\",\n        \".txt\",\n        \".text\",\n        \".bxt\",\n        \".md\",\n        \".markdown\",\n        \".docx\",\n        \".pptx\",\n        \".png\",\n        \".jpg\",\n        \".jpeg\",\n        \".mp3\",\n        \".mp4\",\n        \".wav\",\n        \".m4a\"\n    ];\n    if (!allowed.includes(ext)) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            detail: `Unsupported file type. Allowed: ${allowed.join(\", \")}`\n        }, {\n            status: 400\n        });\n    }\n    if (file.size / (1024 * 1024) > _lib_settings__WEBPACK_IMPORTED_MODULE_6__.settings.MAX_FILE_SIZE_MB) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            detail: `File too large. Maximum size: ${_lib_settings__WEBPACK_IMPORTED_MODULE_6__.settings.MAX_FILE_SIZE_MB}MB`\n        }, {\n            status: 400\n        });\n    }\n    const tmp = await writeTempFile(file);\n    try {\n        const text = await (0,_lib_documentProcessor__WEBPACK_IMPORTED_MODULE_4__.processDocument)(tmp);\n        if (!text.trim()) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                detail: \"No text could be extracted from the document\"\n            }, {\n                status: 400\n            });\n        }\n        const chunks = _state__WEBPACK_IMPORTED_MODULE_5__.chunker.chunkBySentences(text);\n        await _state__WEBPACK_IMPORTED_MODULE_5__.store.addDocuments(chunks);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            filename: file.name,\n            total_chunks: chunks.length,\n            message: `Document processed successfully. ${chunks.length} chunks created.`\n        });\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            detail: `Error processing document: ${e.message || e}`\n        }, {\n            status: 500\n        });\n    } finally{\n        try {\n            await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().unlink(tmp);\n        } catch  {}\n    }\n}\nasync function writeTempFile(file) {\n    const arrayBuffer = await file.arrayBuffer();\n    const buffer = Buffer.from(arrayBuffer);\n    const filePath = node_path__WEBPACK_IMPORTED_MODULE_2___default().join(node_os__WEBPACK_IMPORTED_MODULE_3___default().tmpdir(), `${Date.now()}_${file.name}`);\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().writeFile(filePath, buffer);\n    return filePath;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dC1uZXh0Ly4vYXBwL2FwaS91cGxvYWQvcm91dGUudHM/YTg4ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IGZzIGZyb20gXCJub2RlOmZzL3Byb21pc2VzXCI7XHJcbmltcG9ydCBwYXRoIGZyb20gXCJub2RlOnBhdGhcIjtcclxuaW1wb3J0IG9zIGZyb20gXCJub2RlOm9zXCI7XHJcbmltcG9ydCB7IHByb2Nlc3NEb2N1bWVudCB9IGZyb20gXCJAL2xpYi9kb2N1bWVudFByb2Nlc3NvclwiO1xyXG5pbXBvcnQgeyBjaHVua2VyLCBzdG9yZSB9IGZyb20gXCIuLi9fc3RhdGVcIjtcclxuaW1wb3J0IHsgc2V0dGluZ3MgfSBmcm9tIFwiQC9saWIvc2V0dGluZ3NcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBydW50aW1lID0gXCJub2RlanNcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogUmVxdWVzdCkge1xyXG4gIGNvbnN0IGZvcm0gPSBhd2FpdCByZXEuZm9ybURhdGEoKTtcclxuICBjb25zdCBmaWxlID0gZm9ybS5nZXQoXCJmaWxlXCIpIGFzIEZpbGUgfCBudWxsO1xyXG4gIGlmICghZmlsZSkgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZGV0YWlsOiBcImZpbGUgaXMgcmVxdWlyZWRcIiB9LCB7IHN0YXR1czogNDAwIH0pO1xyXG5cclxuICBjb25zdCBleHQgPSAoZmlsZS5uYW1lIHx8IFwiXCIpLnRvTG93ZXJDYXNlKCkuc2xpY2UoZmlsZS5uYW1lLmxhc3RJbmRleE9mKFwiLlwiKSk7XHJcbiAgY29uc3QgYWxsb3dlZCA9IFtcIi5wZGZcIiwgXCIudHh0XCIsIFwiLnRleHRcIiwgXCIuYnh0XCIsIFwiLm1kXCIsIFwiLm1hcmtkb3duXCIsIFwiLmRvY3hcIiwgXCIucHB0eFwiLCBcIi5wbmdcIiwgXCIuanBnXCIsIFwiLmpwZWdcIiwgXCIubXAzXCIsIFwiLm1wNFwiLCBcIi53YXZcIiwgXCIubTRhXCJdO1xyXG4gIGlmICghYWxsb3dlZC5pbmNsdWRlcyhleHQpKSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBkZXRhaWw6IGBVbnN1cHBvcnRlZCBmaWxlIHR5cGUuIEFsbG93ZWQ6ICR7YWxsb3dlZC5qb2luKFwiLCBcIil9YCB9LCB7IHN0YXR1czogNDAwIH0pO1xyXG4gIH1cclxuXHJcbiAgaWYgKGZpbGUuc2l6ZSAvICgxMDI0ICogMTAyNCkgPiBzZXR0aW5ncy5NQVhfRklMRV9TSVpFX01CKSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBkZXRhaWw6IGBGaWxlIHRvbyBsYXJnZS4gTWF4aW11bSBzaXplOiAke3NldHRpbmdzLk1BWF9GSUxFX1NJWkVfTUJ9TUJgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB0bXAgPSBhd2FpdCB3cml0ZVRlbXBGaWxlKGZpbGUpO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcHJvY2Vzc0RvY3VtZW50KHRtcCk7XHJcbiAgICBpZiAoIXRleHQudHJpbSgpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGRldGFpbDogXCJObyB0ZXh0IGNvdWxkIGJlIGV4dHJhY3RlZCBmcm9tIHRoZSBkb2N1bWVudFwiIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBjaHVua3MgPSBjaHVua2VyLmNodW5rQnlTZW50ZW5jZXModGV4dCk7XHJcbiAgICBhd2FpdCBzdG9yZS5hZGREb2N1bWVudHMoY2h1bmtzKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGZpbGVuYW1lOiBmaWxlLm5hbWUsIHRvdGFsX2NodW5rczogY2h1bmtzLmxlbmd0aCwgbWVzc2FnZTogYERvY3VtZW50IHByb2Nlc3NlZCBzdWNjZXNzZnVsbHkuICR7Y2h1bmtzLmxlbmd0aH0gY2h1bmtzIGNyZWF0ZWQuYCB9KTtcclxuICB9IGNhdGNoIChlOiBhbnkpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGRldGFpbDogYEVycm9yIHByb2Nlc3NpbmcgZG9jdW1lbnQ6ICR7ZS5tZXNzYWdlIHx8IGV9YCB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICB0cnkgeyBhd2FpdCBmcy51bmxpbmsodG1wKTsgfSBjYXRjaCB7fVxyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gd3JpdGVUZW1wRmlsZShmaWxlOiBGaWxlKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTtcclxuICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlcik7XHJcbiAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4ob3MudG1wZGlyKCksIGAke0RhdGUubm93KCl9XyR7ZmlsZS5uYW1lfWApO1xyXG4gIGF3YWl0IGZzLndyaXRlRmlsZShmaWxlUGF0aCwgYnVmZmVyKTtcclxuICByZXR1cm4gZmlsZVBhdGg7XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJmcyIsInBhdGgiLCJvcyIsInByb2Nlc3NEb2N1bWVudCIsImNodW5rZXIiLCJzdG9yZSIsInNldHRpbmdzIiwicnVudGltZSIsIlBPU1QiLCJyZXEiLCJmb3JtIiwiZm9ybURhdGEiLCJmaWxlIiwiZ2V0IiwianNvbiIsImRldGFpbCIsInN0YXR1cyIsImV4dCIsIm5hbWUiLCJ0b0xvd2VyQ2FzZSIsInNsaWNlIiwibGFzdEluZGV4T2YiLCJhbGxvd2VkIiwiaW5jbHVkZXMiLCJqb2luIiwic2l6ZSIsIk1BWF9GSUxFX1NJWkVfTUIiLCJ0bXAiLCJ3cml0ZVRlbXBGaWxlIiwidGV4dCIsInRyaW0iLCJjaHVua3MiLCJjaHVua0J5U2VudGVuY2VzIiwiYWRkRG9jdW1lbnRzIiwiZmlsZW5hbWUiLCJ0b3RhbF9jaHVua3MiLCJsZW5ndGgiLCJtZXNzYWdlIiwiZSIsInVubGluayIsImFycmF5QnVmZmVyIiwiYnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsImZpbGVQYXRoIiwidG1wZGlyIiwiRGF0ZSIsIm5vdyIsIndyaXRlRmlsZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/upload/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/documentProcessor.ts":
/*!**********************************!*\
  !*** ./lib/documentProcessor.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cleanText: () => (/* binding */ cleanText),\n/* harmony export */   extractTextFromPdf: () => (/* binding */ extractTextFromPdf),\n/* harmony export */   extractTextFromTxt: () => (/* binding */ extractTextFromTxt),\n/* harmony export */   processDocument: () => (/* binding */ processDocument)\n/* harmony export */ });\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_fs_promises__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pdf_parse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pdf-parse */ \"pdf-parse\");\n/* harmony import */ var pdf_parse__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pdf_parse__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var mammoth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mammoth */ \"mammoth\");\n/* harmony import */ var mammoth__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mammoth__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var remove_markdown__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! remove-markdown */ \"(rsc)/./node_modules/remove-markdown/index.js\");\n/* harmony import */ var remove_markdown__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(remove_markdown__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jszip */ \"jszip\");\n/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jszip__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var tesseract_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tesseract.js */ \"tesseract.js\");\n/* harmony import */ var tesseract_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(tesseract_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./settings */ \"(rsc)/./lib/settings.ts\");\n/* harmony import */ var ffmpeg_static__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ffmpeg-static */ \"ffmpeg-static\");\n/* harmony import */ var ffmpeg_static__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(ffmpeg_static__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var node_child_process__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! node:child_process */ \"node:child_process\");\n/* harmony import */ var node_child_process__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(node_child_process__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var node_util__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! node:util */ \"node:util\");\n/* harmony import */ var node_util__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(node_util__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var node_os__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! node:os */ \"node:os\");\n/* harmony import */ var node_os__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(node_os__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _xenova_transformers__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @xenova/transformers */ \"(rsc)/./node_modules/@xenova/transformers/src/transformers.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst execFile = (0,node_util__WEBPACK_IMPORTED_MODULE_9__.promisify)(node_child_process__WEBPACK_IMPORTED_MODULE_8__.execFile);\nasync function extractTextFromPdf(filePath) {\n    try {\n        const data = await node_fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(filePath);\n        const res = await pdf_parse__WEBPACK_IMPORTED_MODULE_1___default()(data);\n        return res.text || \"\";\n    } catch (e) {\n        throw new Error(`Error extracting text from PDF: ${e.message || e}`);\n    }\n}\nasync function extractTextFromTxt(filePath) {\n    try {\n        const content = await node_fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(filePath, {\n            encoding: \"utf-8\"\n        });\n        return content;\n    } catch (e) {\n        const content = await node_fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(filePath, {\n            encoding: \"latin1\"\n        });\n        return content;\n    }\n}\nfunction cleanText(text) {\n    return text.split(/\\s+/).join(\" \").trim();\n}\nasync function processDocument(filePath) {\n    const lower = filePath.toLowerCase();\n    let text = \"\";\n    if (lower.endsWith(\".pdf\")) {\n        text = await extractTextFromPdf(filePath);\n    } else if (lower.endsWith(\".txt\") || lower.endsWith(\".text\") || lower.endsWith(\".bxt\")) {\n        text = await extractTextFromTxt(filePath);\n    } else if (lower.endsWith(\".md\") || lower.endsWith(\".markdown\")) {\n        const raw = await extractTextFromTxt(filePath);\n        text = remove_markdown__WEBPACK_IMPORTED_MODULE_3___default()(raw);\n    } else if (lower.endsWith(\".docx\")) {\n        try {\n            const data = await node_fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(filePath);\n            const result = await mammoth__WEBPACK_IMPORTED_MODULE_2___default().extractRawText({\n                buffer: data\n            });\n            text = result.value || \"\";\n        } catch (e) {\n            throw new Error(`Error extracting text from DOCX: ${e.message || e}`);\n        }\n    } else if (lower.endsWith(\".pptx\")) {\n        try {\n            const data = await node_fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(filePath);\n            const zip = await jszip__WEBPACK_IMPORTED_MODULE_4___default().loadAsync(data);\n            const slideFiles = Object.keys(zip.files).filter((p)=>p.startsWith(\"ppt/slides/slide\") && p.endsWith(\".xml\"));\n            const contents = await Promise.all(slideFiles.map(async (p)=>{\n                const file = zip.file(p);\n                if (!file) return \"\";\n                const xml = await file.async(\"text\");\n                return xml.replace(/<[^>]+>/g, \" \").replace(/&amp;/g, \"&\").replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\").replace(/&quot;/g, '\"').replace(/&#39;/g, \"'\");\n            }));\n            text = contents.join(\"\\n\");\n        } catch (e) {\n            throw new Error(`Error extracting text from PPTX: ${e.message || e}`);\n        }\n    } else {\n        if (lower.endsWith(\".png\") || lower.endsWith(\".jpg\") || lower.endsWith(\".jpeg\")) {\n            if (!_settings__WEBPACK_IMPORTED_MODULE_6__.settings.ENABLE_OCR) {\n                throw new Error(\"OCR is disabled by settings.\");\n            }\n            try {\n                const result = await tesseract_js__WEBPACK_IMPORTED_MODULE_5___default().recognize(filePath, \"eng\");\n                text = result.data.text || \"\";\n            } catch (e) {\n                throw new Error(`Error extracting text from image: ${e.message || e}`);\n            }\n        } else if (lower.endsWith(\".mp3\") || lower.endsWith(\".mp4\") || lower.endsWith(\".wav\") || lower.endsWith(\".m4a\")) {\n            const wavPath = await ensureWavMono16k(filePath);\n            const asr = await (0,_xenova_transformers__WEBPACK_IMPORTED_MODULE_12__.pipeline)(\"automatic-speech-recognition\", \"Xenova/whisper-tiny.en\");\n            const result = await asr(wavPath, {\n                chunk_length_s: 30\n            });\n            text = result?.text || \"\";\n        } else {\n            throw new Error(`Unsupported file type: ${filePath}`);\n        }\n    }\n    return cleanText(text);\n}\nasync function ensureWavMono16k(inputPath) {\n    if (!(ffmpeg_static__WEBPACK_IMPORTED_MODULE_7___default())) throw new Error(\"ffmpeg not available\");\n    const out = node_path__WEBPACK_IMPORTED_MODULE_11___default().join(node_os__WEBPACK_IMPORTED_MODULE_10___default().tmpdir(), `${Date.now()}_audio.wav`);\n    await execFile((ffmpeg_static__WEBPACK_IMPORTED_MODULE_7___default()), [\n        \"-y\",\n        \"-i\",\n        inputPath,\n        \"-ac\",\n        \"1\",\n        \"-ar\",\n        \"16000\",\n        \"-f\",\n        \"wav\",\n        out\n    ]);\n    return out;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDO1FBQ3BEO0lBQ0Y7SUFDQSxPQUFPVyxVQUFVUDtBQUNuQjtBQUVBLGVBQWV3QyxpQkFBaUJHLFNBQWlCO0lBQy9DLElBQUksQ0FBQ3hELHNEQUFVQSxFQUFFLE1BQU0sSUFBSWUsTUFBTTtJQUNqQyxNQUFNMEMsTUFBTXBELHNEQUFTLENBQUNELHNEQUFTLElBQUksQ0FBQyxFQUFFdUQsS0FBS0MsR0FBRyxHQUFHLFVBQVUsQ0FBQztJQUM1RCxNQUFNM0QsU0FBU0Qsc0RBQVVBLEVBQVk7UUFDbkM7UUFDQTtRQUFNd0Q7UUFDTjtRQUFPO1FBQ1A7UUFBTztRQUNQO1FBQU07UUFDTkM7S0FDRDtJQUNELE9BQU9BO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzLWNoYXQtbmV4dC8uL2xpYi9kb2N1bWVudFByb2Nlc3Nvci50cz9lNDI3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tIFwibm9kZTpmcy9wcm9taXNlc1wiO1xyXG5pbXBvcnQgcGRmIGZyb20gXCJwZGYtcGFyc2VcIjtcclxuaW1wb3J0IG1hbW1vdGggZnJvbSBcIm1hbW1vdGhcIjtcclxuaW1wb3J0IHJlbW92ZU1hcmtkb3duIGZyb20gXCJyZW1vdmUtbWFya2Rvd25cIjtcclxuaW1wb3J0IEpTWmlwIGZyb20gXCJqc3ppcFwiO1xyXG5pbXBvcnQgVGVzc2VyYWN0IGZyb20gXCJ0ZXNzZXJhY3QuanNcIjtcclxuaW1wb3J0IHsgc2V0dGluZ3MgfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xyXG5pbXBvcnQgZmZtcGVnUGF0aCBmcm9tIFwiZmZtcGVnLXN0YXRpY1wiO1xyXG5pbXBvcnQgeyBleGVjRmlsZSBhcyBleGVjRmlsZUNiIH0gZnJvbSBcIm5vZGU6Y2hpbGRfcHJvY2Vzc1wiO1xyXG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tIFwibm9kZTp1dGlsXCI7XHJcbmltcG9ydCBvcyBmcm9tIFwibm9kZTpvc1wiO1xyXG5pbXBvcnQgcGF0aCBmcm9tIFwibm9kZTpwYXRoXCI7XHJcbmltcG9ydCB7IHBpcGVsaW5lIGFzIGhmUGlwZWxpbmUgfSBmcm9tIFwiQHhlbm92YS90cmFuc2Zvcm1lcnNcIjtcclxuXHJcbmNvbnN0IGV4ZWNGaWxlID0gcHJvbWlzaWZ5KGV4ZWNGaWxlQ2IpO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4dHJhY3RUZXh0RnJvbVBkZihmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGZzLnJlYWRGaWxlKGZpbGVQYXRoKTtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHBkZihkYXRhKTtcclxuICAgIHJldHVybiByZXMudGV4dCB8fCBcIlwiO1xyXG4gIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBleHRyYWN0aW5nIHRleHQgZnJvbSBQREY6ICR7ZS5tZXNzYWdlIHx8IGV9YCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXh0cmFjdFRleHRGcm9tVHh0KGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZnMucmVhZEZpbGUoZmlsZVBhdGgsIHsgZW5jb2Rpbmc6IFwidXRmLThcIiB9KTtcclxuICAgIHJldHVybiBjb250ZW50O1xyXG4gIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKGZpbGVQYXRoLCB7IGVuY29kaW5nOiBcImxhdGluMVwiIH0pO1xyXG4gICAgcmV0dXJuIGNvbnRlbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xlYW5UZXh0KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIHRleHQuc3BsaXQoL1xccysvKS5qb2luKFwiIFwiKS50cmltKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzRG9jdW1lbnQoZmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgY29uc3QgbG93ZXIgPSBmaWxlUGF0aC50b0xvd2VyQ2FzZSgpO1xyXG4gIGxldCB0ZXh0ID0gXCJcIjtcclxuICBpZiAobG93ZXIuZW5kc1dpdGgoJy5wZGYnKSkge1xyXG4gICAgdGV4dCA9IGF3YWl0IGV4dHJhY3RUZXh0RnJvbVBkZihmaWxlUGF0aCk7XHJcbiAgfSBlbHNlIGlmIChsb3dlci5lbmRzV2l0aCgnLnR4dCcpIHx8IGxvd2VyLmVuZHNXaXRoKCcudGV4dCcpIHx8IGxvd2VyLmVuZHNXaXRoKCcuYnh0JykpIHtcclxuICAgIHRleHQgPSBhd2FpdCBleHRyYWN0VGV4dEZyb21UeHQoZmlsZVBhdGgpO1xyXG4gIH0gZWxzZSBpZiAobG93ZXIuZW5kc1dpdGgoJy5tZCcpIHx8IGxvd2VyLmVuZHNXaXRoKCcubWFya2Rvd24nKSkge1xyXG4gICAgY29uc3QgcmF3ID0gYXdhaXQgZXh0cmFjdFRleHRGcm9tVHh0KGZpbGVQYXRoKTtcclxuICAgIHRleHQgPSByZW1vdmVNYXJrZG93bihyYXcpO1xyXG4gIH0gZWxzZSBpZiAobG93ZXIuZW5kc1dpdGgoJy5kb2N4JykpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmcy5yZWFkRmlsZShmaWxlUGF0aCk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1hbW1vdGguZXh0cmFjdFJhd1RleHQoeyBidWZmZXI6IGRhdGEgfSk7XHJcbiAgICAgIHRleHQgPSByZXN1bHQudmFsdWUgfHwgXCJcIjtcclxuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGV4dHJhY3RpbmcgdGV4dCBmcm9tIERPQ1g6ICR7ZS5tZXNzYWdlIHx8IGV9YCk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIGlmIChsb3dlci5lbmRzV2l0aCgnLnBwdHgnKSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGZzLnJlYWRGaWxlKGZpbGVQYXRoKTtcclxuICAgICAgY29uc3QgemlwID0gYXdhaXQgSlNaaXAubG9hZEFzeW5jKGRhdGEpO1xyXG4gICAgICBjb25zdCBzbGlkZUZpbGVzID0gT2JqZWN0LmtleXMoemlwLmZpbGVzKS5maWx0ZXIoKHApID0+IHAuc3RhcnRzV2l0aCgncHB0L3NsaWRlcy9zbGlkZScpICYmIHAuZW5kc1dpdGgoJy54bWwnKSk7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgUHJvbWlzZS5hbGwoc2xpZGVGaWxlcy5tYXAoYXN5bmMgKHApID0+IHtcclxuICAgICAgICBjb25zdCBmaWxlID0gemlwLmZpbGUocCk7XHJcbiAgICAgICAgaWYgKCFmaWxlKSByZXR1cm4gXCJcIjtcclxuICAgICAgICBjb25zdCB4bWwgPSBhd2FpdCBmaWxlLmFzeW5jKCd0ZXh0Jyk7XHJcbiAgICAgICAgcmV0dXJuIHhtbC5yZXBsYWNlKC88W14+XSs+L2csICcgJykucmVwbGFjZSgvJmFtcDsvZywgJyYnKS5yZXBsYWNlKC8mbHQ7L2csICc8JykucmVwbGFjZSgvJmd0Oy9nLCAnPicpLnJlcGxhY2UoLyZxdW90Oy9nLCAnXCInKS5yZXBsYWNlKC8mIzM5Oy9nLCBcIidcIik7XHJcbiAgICAgIH0pKTtcclxuICAgICAgdGV4dCA9IGNvbnRlbnRzLmpvaW4oJ1xcbicpO1xyXG4gICAgfSBjYXRjaCAoZTogYW55KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZXh0cmFjdGluZyB0ZXh0IGZyb20gUFBUWDogJHtlLm1lc3NhZ2UgfHwgZX1gKTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgaWYgKGxvd2VyLmVuZHNXaXRoKCcucG5nJykgfHwgbG93ZXIuZW5kc1dpdGgoJy5qcGcnKSB8fCBsb3dlci5lbmRzV2l0aCgnLmpwZWcnKSkge1xyXG4gICAgICBpZiAoIXNldHRpbmdzLkVOQUJMRV9PQ1IpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPQ1IgaXMgZGlzYWJsZWQgYnkgc2V0dGluZ3MuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVGVzc2VyYWN0LnJlY29nbml6ZShmaWxlUGF0aCwgJ2VuZycpO1xyXG4gICAgICAgIHRleHQgPSByZXN1bHQuZGF0YS50ZXh0IHx8IFwiXCI7XHJcbiAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZXh0cmFjdGluZyB0ZXh0IGZyb20gaW1hZ2U6ICR7ZS5tZXNzYWdlIHx8IGV9YCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAobG93ZXIuZW5kc1dpdGgoJy5tcDMnKSB8fCBsb3dlci5lbmRzV2l0aCgnLm1wNCcpIHx8IGxvd2VyLmVuZHNXaXRoKCcud2F2JykgfHwgbG93ZXIuZW5kc1dpdGgoJy5tNGEnKSkge1xyXG4gICAgICBjb25zdCB3YXZQYXRoID0gYXdhaXQgZW5zdXJlV2F2TW9ubzE2ayhmaWxlUGF0aCk7XHJcbiAgICAgIGNvbnN0IGFzciA9IGF3YWl0IGhmUGlwZWxpbmUoJ2F1dG9tYXRpYy1zcGVlY2gtcmVjb2duaXRpb24nLCAnWGVub3ZhL3doaXNwZXItdGlueS5lbicpO1xyXG4gICAgICBjb25zdCByZXN1bHQ6IGFueSA9IGF3YWl0IGFzcih3YXZQYXRoLCB7IGNodW5rX2xlbmd0aF9zOiAzMCB9KTtcclxuICAgICAgdGV4dCA9IHJlc3VsdD8udGV4dCB8fCAnJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGZpbGUgdHlwZTogJHtmaWxlUGF0aH1gKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGNsZWFuVGV4dCh0ZXh0KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlV2F2TW9ubzE2ayhpbnB1dFBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgaWYgKCFmZm1wZWdQYXRoKSB0aHJvdyBuZXcgRXJyb3IoJ2ZmbXBlZyBub3QgYXZhaWxhYmxlJyk7XHJcbiAgY29uc3Qgb3V0ID0gcGF0aC5qb2luKG9zLnRtcGRpcigpLCBgJHtEYXRlLm5vdygpfV9hdWRpby53YXZgKTtcclxuICBhd2FpdCBleGVjRmlsZShmZm1wZWdQYXRoIGFzIHN0cmluZywgW1xyXG4gICAgJy15JyxcclxuICAgICctaScsIGlucHV0UGF0aCxcclxuICAgICctYWMnLCAnMScsXHJcbiAgICAnLWFyJywgJzE2MDAwJyxcclxuICAgICctZicsICd3YXYnLFxyXG4gICAgb3V0LFxyXG4gIF0pO1xyXG4gIHJldHVybiBvdXQ7XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJmcyIsInBkZiIsIm1hbW1vdGgiLCJyZW1vdmVNYXJrZG93biIsIkpTWmlwIiwiVGVzc2VyYWN0Iiwic2V0dGluZ3MiLCJmZm1wZWdQYXRoIiwiZXhlY0ZpbGUiLCJleGVjRmlsZUNiIiwicHJvbWlzaWZ5Iiwib3MiLCJwYXRoIiwicGlwZWxpbmUiLCJoZlBpcGVsaW5lIiwiZXh0cmFjdFRleHRGcm9tUGRmIiwiZmlsZVBhdGgiLCJkYXRhIiwicmVhZEZpbGUiLCJyZXMiLCJ0ZXh0IiwiZSIsIkVycm9yIiwibWVzc2FnZSIsImV4dHJhY3RUZXh0RnJvbVR4dCIsImNvbnRlbnQiLCJlbmNvZGluZyIsImNsZWFuVGV4dCIsInNwbGl0Iiwiam9pbiIsInRyaW0iLCJwcm9jZXNzRG9jdW1lbnQiLCJsb3dlciIsInRvTG93ZXJDYXNlIiwiZW5kc1dpdGgiLCJyYXciLCJyZXN1bHQiLCJleHRyYWN0UmF3VGV4dCIsImJ1ZmZlciIsInZhbHVlIiwiemlwIiwibG9hZEFzeW5jIiwic2xpZGVGaWxlcyIsIk9iamVjdCIsImtleXMiLCJmaWxlcyIsImZpbHRlciIsInAiLCJzdGFydHNXaXRoIiwiY29udGVudHMiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwiZmlsZSIsInhtbCIsImFzeW5jIiwicmVwbGFjZSIsIkVOQUJMRV9PQ1IiLCJyZWNvZ25pemUiLCJ3YXZQYXRoIiwiZW5zdXJlV2F2TW9ubzE2ayIsImFzciIsImNodW5rX2xlbmd0aF9zIiwiaW5wdXRQYXRoIiwib3V0IiwidG1wZGlyIiwiRGF0ZSIsIm5vdyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/documentProcessor.ts\n");

/***/ }),

/***/ "(rsc)/./lib/settings.ts":
/*!*************************!*\
  !*** ./lib/settings.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SYSTEM_PROMPT: () => (/* binding */ SYSTEM_PROMPT),\n/* harmony export */   settings: () => (/* binding */ settings)\n/* harmony export */ });\nconst settings = {\n    GEMINI_API_KEY: process.env.GEMINI_API_KEY || \"\",\n    MAX_CHUNK_SIZE: Number(process.env.MAX_CHUNK_SIZE || 1000),\n    CHUNK_OVERLAP: Number(process.env.CHUNK_OVERLAP || 200),\n    MAX_FILE_SIZE_MB: Number(process.env.MAX_FILE_SIZE_MB || 50),\n    EMBEDDING_MODEL: process.env.EMBEDDING_MODEL || \"Xenova/all-MiniLM-L6-v2\",\n    GEMINI_MODEL: process.env.GEMINI_MODEL || \"gemini-2.0-flash-exp\",\n    TEMPERATURE: Number(process.env.TEMPERATURE || 0.7),\n    MAX_OUTPUT_TOKENS: Number(process.env.MAX_OUTPUT_TOKENS || 2048),\n    ENABLE_OCR: String(process.env.ENABLE_OCR || \"true\") === \"true\",\n    ENABLE_YOUTUBE: String(process.env.ENABLE_YOUTUBE || \"true\") === \"true\"\n};\nconst SYSTEM_PROMPT = `You are a helpful assistant that answers questions based ONLY on the provided document context.\r\nIf the answer cannot be found in the provided context, clearly state that the information is not available in the document.\r\nDo not make up information or use external knowledge. Always cite which part of the document you're referencing.`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2V0dGluZ3MudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFhTyxNQUFNQSxXQUFxQjtJQUNoQ0MsZ0JBQWdCQyxRQUFRQyxHQUFHLENBQUNGLGNBQWMsSUFBSTtJQUM5Q0csZ0JBQWdCQyxPQUFPSCxRQUFRQyxHQUFHLENBQUNDLGNBQWMsSUFBSTtJQUNyREUsZUFBZUQsT0FBT0gsUUFBUUMsR0FBRyxDQUFDRyxhQUFhLElBQUk7SUFDbkRDLGtCQUFrQkYsT0FBT0gsUUFBUUMsR0FBRyxDQUFDSSxnQkFBZ0IsSUFBSTtJQUN6REMsaUJBQWlCTixRQUFRQyxHQUFHLENBQUNLLGVBQWUsSUFBSTtJQUNoREMsY0FBY1AsUUFBUUMsR0FBRyxDQUFDTSxZQUFZLElBQUk7SUFDMUNDLGFBQWFMLE9BQU9ILFFBQVFDLEdBQUcsQ0FBQ08sV0FBVyxJQUFJO0lBQy9DQyxtQkFBbUJOLE9BQU9ILFFBQVFDLEdBQUcsQ0FBQ1EsaUJBQWlCLElBQUk7SUFDM0RDLFlBQVlDLE9BQU9YLFFBQVFDLEdBQUcsQ0FBQ1MsVUFBVSxJQUFJLFlBQVk7SUFDekRFLGdCQUFnQkQsT0FBT1gsUUFBUUMsR0FBRyxDQUFDVyxjQUFjLElBQUksWUFBWTtBQUNuRSxFQUFFO0FBRUssTUFBTUMsZ0JBQWdCLENBQUM7O2dIQUVrRixDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzLWNoYXQtbmV4dC8uL2xpYi9zZXR0aW5ncy50cz8xZDcyIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIFNldHRpbmdzID0ge1xyXG4gIEdFTUlOSV9BUElfS0VZOiBzdHJpbmc7XHJcbiAgTUFYX0NIVU5LX1NJWkU6IG51bWJlcjtcclxuICBDSFVOS19PVkVSTEFQOiBudW1iZXI7XHJcbiAgTUFYX0ZJTEVfU0laRV9NQjogbnVtYmVyO1xyXG4gIEVNQkVERElOR19NT0RFTDogc3RyaW5nO1xyXG4gIEdFTUlOSV9NT0RFTDogc3RyaW5nO1xyXG4gIFRFTVBFUkFUVVJFOiBudW1iZXI7XHJcbiAgTUFYX09VVFBVVF9UT0tFTlM6IG51bWJlcjtcclxuICBFTkFCTEVfT0NSOiBib29sZWFuO1xyXG4gIEVOQUJMRV9ZT1VUVUJFOiBib29sZWFuO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzOiBTZXR0aW5ncyA9IHtcclxuICBHRU1JTklfQVBJX0tFWTogcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkgfHwgXCJcIixcclxuICBNQVhfQ0hVTktfU0laRTogTnVtYmVyKHByb2Nlc3MuZW52Lk1BWF9DSFVOS19TSVpFIHx8IDEwMDApLFxyXG4gIENIVU5LX09WRVJMQVA6IE51bWJlcihwcm9jZXNzLmVudi5DSFVOS19PVkVSTEFQIHx8IDIwMCksXHJcbiAgTUFYX0ZJTEVfU0laRV9NQjogTnVtYmVyKHByb2Nlc3MuZW52Lk1BWF9GSUxFX1NJWkVfTUIgfHwgNTApLFxyXG4gIEVNQkVERElOR19NT0RFTDogcHJvY2Vzcy5lbnYuRU1CRURESU5HX01PREVMIHx8IFwiWGVub3ZhL2FsbC1NaW5pTE0tTDYtdjJcIixcclxuICBHRU1JTklfTU9ERUw6IHByb2Nlc3MuZW52LkdFTUlOSV9NT0RFTCB8fCBcImdlbWluaS0yLjAtZmxhc2gtZXhwXCIsXHJcbiAgVEVNUEVSQVRVUkU6IE51bWJlcihwcm9jZXNzLmVudi5URU1QRVJBVFVSRSB8fCAwLjcpLFxyXG4gIE1BWF9PVVRQVVRfVE9LRU5TOiBOdW1iZXIocHJvY2Vzcy5lbnYuTUFYX09VVFBVVF9UT0tFTlMgfHwgMjA0OCksXHJcbiAgRU5BQkxFX09DUjogU3RyaW5nKHByb2Nlc3MuZW52LkVOQUJMRV9PQ1IgfHwgXCJ0cnVlXCIpID09PSBcInRydWVcIixcclxuICBFTkFCTEVfWU9VVFVCRTogU3RyaW5nKHByb2Nlc3MuZW52LkVOQUJMRV9ZT1VUVUJFIHx8IFwidHJ1ZVwiKSA9PT0gXCJ0cnVlXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgU1lTVEVNX1BST01QVCA9IGBZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCBhbnN3ZXJzIHF1ZXN0aW9ucyBiYXNlZCBPTkxZIG9uIHRoZSBwcm92aWRlZCBkb2N1bWVudCBjb250ZXh0LlxyXG5JZiB0aGUgYW5zd2VyIGNhbm5vdCBiZSBmb3VuZCBpbiB0aGUgcHJvdmlkZWQgY29udGV4dCwgY2xlYXJseSBzdGF0ZSB0aGF0IHRoZSBpbmZvcm1hdGlvbiBpcyBub3QgYXZhaWxhYmxlIGluIHRoZSBkb2N1bWVudC5cclxuRG8gbm90IG1ha2UgdXAgaW5mb3JtYXRpb24gb3IgdXNlIGV4dGVybmFsIGtub3dsZWRnZS4gQWx3YXlzIGNpdGUgd2hpY2ggcGFydCBvZiB0aGUgZG9jdW1lbnQgeW91J3JlIHJlZmVyZW5jaW5nLmA7XHJcblxyXG4iXSwibmFtZXMiOlsic2V0dGluZ3MiLCJHRU1JTklfQVBJX0tFWSIsInByb2Nlc3MiLCJlbnYiLCJNQVhfQ0hVTktfU0laRSIsIk51bWJlciIsIkNIVU5LX09WRVJMQVAiLCJNQVhfRklMRV9TSVpFX01CIiwiRU1CRURESU5HX01PREVMIiwiR0VNSU5JX01PREVMIiwiVEVNUEVSQVRVUkUiLCJNQVhfT1VUUFVUX1RPS0VOUyIsIkVOQUJMRV9PQ1IiLCJTdHJpbmciLCJFTkFCTEVfWU9VVFVCRSIsIlNZU1RFTV9QUk9NUFQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/settings.ts\n");

/***/ }),

/***/ "(rsc)/./lib/textChunker.ts":
/*!****************************!*\
  !*** ./lib/textChunker.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TextChunker: () => (/* binding */ TextChunker)\n/* harmony export */ });\nclass TextChunker {\n    constructor(chunkSize = 1000, overlap = 200){\n        this.chunkSize = chunkSize;\n        this.overlap = overlap;\n    }\n    chunkBySentences(text, maxChunkSize) {\n        const limit = maxChunkSize ?? this.chunkSize;\n        const sentences = text.replace(/!/g, \".\").replace(/\\?/g, \".\").split(\".\").map((s)=>s.trim()).filter(Boolean);\n        const chunks = [];\n        let current = [];\n        let size = 0;\n        let id = 0;\n        for (const sentence of sentences){\n            const sentSize = sentence.split(/\\s+/).length;\n            if (size + sentSize > limit && current.length) {\n                chunks.push({\n                    id,\n                    text: current.join(\". \") + \".\",\n                    sentence_count: current.length,\n                    token_count: size\n                });\n                id += 1;\n                if (this.overlap > 0 && current.length > 1) {\n                    current = current.slice(-1);\n                    size = current[0].split(/\\s+/).length;\n                } else {\n                    current = [];\n                    size = 0;\n                }\n            }\n            current.push(sentence);\n            size += sentSize;\n        }\n        if (current.length) {\n            chunks.push({\n                id,\n                text: current.join(\". \") + \".\",\n                sentence_count: current.length,\n                token_count: size\n            });\n        }\n        return chunks;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdGV4dENodW5rZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQVNPLE1BQU1BO0lBSVhDLFlBQVlDLFlBQW9CLElBQUksRUFBRUMsVUFBa0IsR0FBRyxDQUFFO1FBQzNELElBQUksQ0FBQ0QsU0FBUyxHQUFHQTtRQUNqQixJQUFJLENBQUNDLE9BQU8sR0FBR0E7SUFDakI7SUFFQUMsaUJBQWlCQyxJQUFZLEVBQUVDLFlBQXFCLEVBQVc7UUFDN0QsTUFBTUMsUUFBUUQsZ0JBQWdCLElBQUksQ0FBQ0osU0FBUztRQUM1QyxNQUFNTSxZQUFZSCxLQUFLSSxPQUFPLENBQUMsTUFBTSxLQUFLQSxPQUFPLENBQUMsT0FBTyxLQUFLQyxLQUFLLENBQUMsS0FBS0MsR0FBRyxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxJQUFJLElBQUlDLE1BQU0sQ0FBQ0M7UUFDbkcsTUFBTUMsU0FBa0IsRUFBRTtRQUMxQixJQUFJQyxVQUFvQixFQUFFO1FBQzFCLElBQUlDLE9BQU87UUFDWCxJQUFJQyxLQUFLO1FBRVQsS0FBSyxNQUFNQyxZQUFZWixVQUFXO1lBQ2hDLE1BQU1hLFdBQVdELFNBQVNWLEtBQUssQ0FBQyxPQUFPWSxNQUFNO1lBQzdDLElBQUlKLE9BQU9HLFdBQVdkLFNBQVNVLFFBQVFLLE1BQU0sRUFBRTtnQkFDN0NOLE9BQU9PLElBQUksQ0FBQztvQkFBRUo7b0JBQUlkLE1BQU1ZLFFBQVFPLElBQUksQ0FBQyxRQUFRO29CQUFLQyxnQkFBZ0JSLFFBQVFLLE1BQU07b0JBQUVJLGFBQWFSO2dCQUFLO2dCQUNwR0MsTUFBTTtnQkFDTixJQUFJLElBQUksQ0FBQ2hCLE9BQU8sR0FBRyxLQUFLYyxRQUFRSyxNQUFNLEdBQUcsR0FBRztvQkFDMUNMLFVBQVVBLFFBQVFVLEtBQUssQ0FBQyxDQUFDO29CQUN6QlQsT0FBT0QsT0FBTyxDQUFDLEVBQUUsQ0FBQ1AsS0FBSyxDQUFDLE9BQU9ZLE1BQU07Z0JBQ3ZDLE9BQU87b0JBQ0xMLFVBQVUsRUFBRTtvQkFDWkMsT0FBTztnQkFDVDtZQUNGO1lBQ0FELFFBQVFNLElBQUksQ0FBQ0g7WUFDYkYsUUFBUUc7UUFDVjtRQUNBLElBQUlKLFFBQVFLLE1BQU0sRUFBRTtZQUNsQk4sT0FBT08sSUFBSSxDQUFDO2dCQUFFSjtnQkFBSWQsTUFBTVksUUFBUU8sSUFBSSxDQUFDLFFBQVE7Z0JBQUtDLGdCQUFnQlIsUUFBUUssTUFBTTtnQkFBRUksYUFBYVI7WUFBSztRQUN0RztRQUNBLE9BQU9GO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3MtY2hhdC1uZXh0Ly4vbGliL3RleHRDaHVua2VyLnRzPzc4NDAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHR5cGUgQ2h1bmsgPSB7XHJcbiAgaWQ6IG51bWJlcjtcclxuICB0ZXh0OiBzdHJpbmc7XHJcbiAgdG9rZW5fY291bnQ/OiBudW1iZXI7XHJcbiAgc2VudGVuY2VfY291bnQ/OiBudW1iZXI7XHJcbiAgc3RhcnRfcG9zPzogbnVtYmVyO1xyXG4gIGVuZF9wb3M/OiBudW1iZXI7XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgVGV4dENodW5rZXIge1xyXG4gIHByaXZhdGUgY2h1bmtTaXplOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBvdmVybGFwOiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNodW5rU2l6ZTogbnVtYmVyID0gMTAwMCwgb3ZlcmxhcDogbnVtYmVyID0gMjAwKSB7XHJcbiAgICB0aGlzLmNodW5rU2l6ZSA9IGNodW5rU2l6ZTtcclxuICAgIHRoaXMub3ZlcmxhcCA9IG92ZXJsYXA7XHJcbiAgfVxyXG5cclxuICBjaHVua0J5U2VudGVuY2VzKHRleHQ6IHN0cmluZywgbWF4Q2h1bmtTaXplPzogbnVtYmVyKTogQ2h1bmtbXSB7XHJcbiAgICBjb25zdCBsaW1pdCA9IG1heENodW5rU2l6ZSA/PyB0aGlzLmNodW5rU2l6ZTtcclxuICAgIGNvbnN0IHNlbnRlbmNlcyA9IHRleHQucmVwbGFjZSgvIS9nLCBcIi5cIikucmVwbGFjZSgvXFw/L2csIFwiLlwiKS5zcGxpdChcIi5cIikubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihCb29sZWFuKTtcclxuICAgIGNvbnN0IGNodW5rczogQ2h1bmtbXSA9IFtdO1xyXG4gICAgbGV0IGN1cnJlbnQ6IHN0cmluZ1tdID0gW107XHJcbiAgICBsZXQgc2l6ZSA9IDA7XHJcbiAgICBsZXQgaWQgPSAwO1xyXG5cclxuICAgIGZvciAoY29uc3Qgc2VudGVuY2Ugb2Ygc2VudGVuY2VzKSB7XHJcbiAgICAgIGNvbnN0IHNlbnRTaXplID0gc2VudGVuY2Uuc3BsaXQoL1xccysvKS5sZW5ndGg7XHJcbiAgICAgIGlmIChzaXplICsgc2VudFNpemUgPiBsaW1pdCAmJiBjdXJyZW50Lmxlbmd0aCkge1xyXG4gICAgICAgIGNodW5rcy5wdXNoKHsgaWQsIHRleHQ6IGN1cnJlbnQuam9pbignLiAnKSArICcuJywgc2VudGVuY2VfY291bnQ6IGN1cnJlbnQubGVuZ3RoLCB0b2tlbl9jb3VudDogc2l6ZSB9KTtcclxuICAgICAgICBpZCArPSAxO1xyXG4gICAgICAgIGlmICh0aGlzLm92ZXJsYXAgPiAwICYmIGN1cnJlbnQubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuc2xpY2UoLTEpO1xyXG4gICAgICAgICAgc2l6ZSA9IGN1cnJlbnRbMF0uc3BsaXQoL1xccysvKS5sZW5ndGg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGN1cnJlbnQgPSBbXTtcclxuICAgICAgICAgIHNpemUgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjdXJyZW50LnB1c2goc2VudGVuY2UpO1xyXG4gICAgICBzaXplICs9IHNlbnRTaXplO1xyXG4gICAgfVxyXG4gICAgaWYgKGN1cnJlbnQubGVuZ3RoKSB7XHJcbiAgICAgIGNodW5rcy5wdXNoKHsgaWQsIHRleHQ6IGN1cnJlbnQuam9pbignLiAnKSArICcuJywgc2VudGVuY2VfY291bnQ6IGN1cnJlbnQubGVuZ3RoLCB0b2tlbl9jb3VudDogc2l6ZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBjaHVua3M7XHJcbiAgfVxyXG59XHJcblxyXG4iXSwibmFtZXMiOlsiVGV4dENodW5rZXIiLCJjb25zdHJ1Y3RvciIsImNodW5rU2l6ZSIsIm92ZXJsYXAiLCJjaHVua0J5U2VudGVuY2VzIiwidGV4dCIsIm1heENodW5rU2l6ZSIsImxpbWl0Iiwic2VudGVuY2VzIiwicmVwbGFjZSIsInNwbGl0IiwibWFwIiwicyIsInRyaW0iLCJmaWx0ZXIiLCJCb29sZWFuIiwiY2h1bmtzIiwiY3VycmVudCIsInNpemUiLCJpZCIsInNlbnRlbmNlIiwic2VudFNpemUiLCJsZW5ndGgiLCJwdXNoIiwiam9pbiIsInNlbnRlbmNlX2NvdW50IiwidG9rZW5fY291bnQiLCJzbGljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/textChunker.ts\n");

/***/ }),

/***/ "(rsc)/./lib/vectorStore.ts":
/*!****************************!*\
  !*** ./lib/vectorStore.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VectorStore: () => (/* binding */ VectorStore)\n/* harmony export */ });\n/* harmony import */ var _xenova_transformers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @xenova/transformers */ \"(rsc)/./node_modules/@xenova/transformers/src/transformers.js\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass VectorStore {\n    constructor(modelName, dbPath){\n        this.chunks = [];\n        this.embeddings = [];\n        this.embedderPromise = null;\n        this.db = null;\n        this.modelName = modelName;\n        this.useSqlite = Boolean(dbPath);\n        if (dbPath) {\n            this.db = new (better_sqlite3__WEBPACK_IMPORTED_MODULE_1___default())(dbPath);\n            this.initDb();\n            this.loadFromDb();\n        }\n    }\n    initDb() {\n        if (!this.db) return;\n        this.db.exec(`\r\n      CREATE TABLE IF NOT EXISTS chunks (\r\n        id INTEGER PRIMARY KEY,\r\n        text TEXT NOT NULL\r\n      );\r\n      CREATE TABLE IF NOT EXISTS embeddings (\r\n        chunk_id INTEGER PRIMARY KEY,\r\n        vector BLOB NOT NULL,\r\n        FOREIGN KEY(chunk_id) REFERENCES chunks(id) ON DELETE CASCADE\r\n      );\r\n    `);\n    }\n    loadFromDb() {\n        if (!this.db) return;\n        const rows = this.db.prepare(\"SELECT c.id, c.text, e.vector FROM chunks c JOIN embeddings e ON e.chunk_id = c.id ORDER BY c.id\").all();\n        this.chunks = rows.map((r)=>({\n                id: r.id,\n                text: r.text\n            }));\n        this.embeddings = rows.map((r)=>new Float32Array(Buffer.from(r.vector).buffer));\n    }\n    async getEmbedder() {\n        if (!this.embedderPromise) {\n            const model = this.modelName.includes(\"/\") ? this.modelName : `Xenova/${this.modelName}`;\n            this.embedderPromise = (0,_xenova_transformers__WEBPACK_IMPORTED_MODULE_0__.pipeline)(\"feature-extraction\", model);\n        }\n        return this.embedderPromise;\n    }\n    async addDocuments(chunks) {\n        if (!chunks.length) return;\n        const embedder = await this.getEmbedder();\n        const texts = chunks.map((c)=>c.text);\n        const outputs = await embedder(texts, {\n            pooling: \"mean\",\n            normalize: true\n        });\n        const vectors = outputs.tolist().map((row)=>new Float32Array(row));\n        if (this.db) {\n            const insertChunk = this.db.prepare(\"INSERT INTO chunks (id, text) VALUES (?, ?)\");\n            const insertEmbedding = this.db.prepare(\"INSERT INTO embeddings (chunk_id, vector) VALUES (?, ?)\");\n            const trx = this.db.transaction((pairs)=>{\n                for (const { chunk, vector } of pairs){\n                    insertChunk.run(chunk.id, chunk.text);\n                    insertEmbedding.run(chunk.id, Buffer.from(vector.buffer));\n                }\n            });\n            const pairs = chunks.map((chunk, i)=>({\n                    chunk,\n                    vector: vectors[i]\n                }));\n            trx(pairs);\n            this.loadFromDb();\n        } else {\n            this.chunks.push(...chunks);\n            this.embeddings.push(...vectors);\n        }\n    }\n    async search(query, topK = 5) {\n        if (this.chunks.length === 0) return [];\n        const embedder = await this.getEmbedder();\n        const out = await embedder(query, {\n            pooling: \"mean\",\n            normalize: true\n        });\n        const q = new Float32Array(out.tolist()[0]);\n        const scores = this.embeddings.map((v)=>cosineSimilarity(q, v));\n        const indices = scores.map((s, i)=>[\n                s,\n                i\n            ]).sort((a, b)=>b[0] - a[0]).slice(0, Math.min(topK, scores.length));\n        return indices.map(([score, i])=>({\n                chunk: this.chunks[i],\n                score\n            }));\n    }\n    clear() {\n        this.chunks = [];\n        this.embeddings = [];\n        if (this.db) {\n            this.db.exec(\"DELETE FROM embeddings; DELETE FROM chunks;\");\n        }\n    }\n    getStats() {\n        return {\n            total_chunks: this.chunks.length,\n            dimension: this.embeddings[0]?.length || 0,\n            model_name: this.modelName,\n            index_size: this.embeddings.length\n        };\n    }\n}\nfunction cosineSimilarity(a, b) {\n    let dot = 0;\n    let na = 0;\n    let nb = 0;\n    for(let i = 0; i < a.length && i < b.length; i++){\n        dot += a[i] * b[i];\n        na += a[i] * a[i];\n        nb += b[i] * b[i];\n    }\n    if (na === 0 || nb === 0) return 0;\n    return dot / (Math.sqrt(na) * Math.sqrt(nb));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdmVjdG9yU3RvcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnRDtBQUVWO0FBSS9CLE1BQU1FO0lBUVhDLFlBQVlDLFNBQWlCLEVBQUVDLE1BQWUsQ0FBRTthQVB4Q0MsU0FBa0IsRUFBRTthQUNwQkMsYUFBMEIsRUFBRTthQUM1QkMsa0JBQXVDO2FBRXZDQyxLQUErQjtRQUlyQyxJQUFJLENBQUNMLFNBQVMsR0FBR0E7UUFDakIsSUFBSSxDQUFDTSxTQUFTLEdBQUdDLFFBQVFOO1FBQ3pCLElBQUlBLFFBQVE7WUFDVixJQUFJLENBQUNJLEVBQUUsR0FBRyxJQUFJUix1REFBUUEsQ0FBQ0k7WUFDdkIsSUFBSSxDQUFDTyxNQUFNO1lBQ1gsSUFBSSxDQUFDQyxVQUFVO1FBQ2pCO0lBQ0Y7SUFFUUQsU0FBUztRQUNmLElBQUksQ0FBQyxJQUFJLENBQUNILEVBQUUsRUFBRTtRQUNkLElBQUksQ0FBQ0EsRUFBRSxDQUFDSyxJQUFJLENBQUMsQ0FBQzs7Ozs7Ozs7OztJQVVkLENBQUM7SUFDSDtJQUVRRCxhQUFhO1FBQ25CLElBQUksQ0FBQyxJQUFJLENBQUNKLEVBQUUsRUFBRTtRQUNkLE1BQU1NLE9BQU8sSUFBSSxDQUFDTixFQUFFLENBQUNPLE9BQU8sQ0FBQyxvR0FBb0dDLEdBQUc7UUFDcEksSUFBSSxDQUFDWCxNQUFNLEdBQUdTLEtBQUtHLEdBQUcsQ0FBQyxDQUFDQyxJQUFZO2dCQUFFQyxJQUFJRCxFQUFFQyxFQUFFO2dCQUFFQyxNQUFNRixFQUFFRSxJQUFJO1lBQUM7UUFDN0QsSUFBSSxDQUFDZCxVQUFVLEdBQUdRLEtBQUtHLEdBQUcsQ0FBQyxDQUFDQyxJQUFXLElBQUlHLGFBQWFDLE9BQU9DLElBQUksQ0FBQ0wsRUFBRU0sTUFBTSxFQUFFQyxNQUFNO0lBQ3RGO0lBRUEsTUFBY0MsY0FBYztRQUMxQixJQUFJLENBQUMsSUFBSSxDQUFDbkIsZUFBZSxFQUFFO1lBQ3pCLE1BQU1vQixRQUFRLElBQUksQ0FBQ3hCLFNBQVMsQ0FBQ3lCLFFBQVEsQ0FBQyxPQUFPLElBQUksQ0FBQ3pCLFNBQVMsR0FBRyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUNBLFNBQVMsQ0FBQyxDQUFDO1lBQ3hGLElBQUksQ0FBQ0ksZUFBZSxHQUFHUiw4REFBUUEsQ0FBQyxzQkFBc0I0QjtRQUN4RDtRQUNBLE9BQU8sSUFBSSxDQUFDcEIsZUFBZTtJQUM3QjtJQUVBLE1BQU1zQixhQUFheEIsTUFBZSxFQUFpQjtRQUNqRCxJQUFJLENBQUNBLE9BQU95QixNQUFNLEVBQUU7UUFDcEIsTUFBTUMsV0FBVyxNQUFNLElBQUksQ0FBQ0wsV0FBVztRQUN2QyxNQUFNTSxRQUFRM0IsT0FBT1ksR0FBRyxDQUFDZ0IsQ0FBQUEsSUFBS0EsRUFBRWIsSUFBSTtRQUNwQyxNQUFNYyxVQUFVLE1BQU1ILFNBQVNDLE9BQU87WUFBRUcsU0FBUztZQUFRQyxXQUFXO1FBQUs7UUFDekUsTUFBTUMsVUFBdUJILFFBQVFJLE1BQU0sR0FBR3JCLEdBQUcsQ0FBQyxDQUFDc0IsTUFBa0IsSUFBSWxCLGFBQWFrQjtRQUN0RixJQUFJLElBQUksQ0FBQy9CLEVBQUUsRUFBRTtZQUNYLE1BQU1nQyxjQUFjLElBQUksQ0FBQ2hDLEVBQUUsQ0FBQ08sT0FBTyxDQUFDO1lBQ3BDLE1BQU0wQixrQkFBa0IsSUFBSSxDQUFDakMsRUFBRSxDQUFDTyxPQUFPLENBQUM7WUFDeEMsTUFBTTJCLE1BQU0sSUFBSSxDQUFDbEMsRUFBRSxDQUFDbUMsV0FBVyxDQUFDLENBQUNDO2dCQUMvQixLQUFLLE1BQU0sRUFBRUMsS0FBSyxFQUFFckIsTUFBTSxFQUFFLElBQUlvQixNQUFPO29CQUNyQ0osWUFBWU0sR0FBRyxDQUFDRCxNQUFNMUIsRUFBRSxFQUFFMEIsTUFBTXpCLElBQUk7b0JBQ3BDcUIsZ0JBQWdCSyxHQUFHLENBQUNELE1BQU0xQixFQUFFLEVBQUVHLE9BQU9DLElBQUksQ0FBQ0MsT0FBT0MsTUFBTTtnQkFDekQ7WUFDRjtZQUNBLE1BQU1tQixRQUFRdkMsT0FBT1ksR0FBRyxDQUFDLENBQUM0QixPQUFPRSxJQUFPO29CQUFFRjtvQkFBT3JCLFFBQVFhLE9BQU8sQ0FBQ1UsRUFBRTtnQkFBQztZQUNwRUwsSUFBSUU7WUFDSixJQUFJLENBQUNoQyxVQUFVO1FBQ2pCLE9BQU87WUFDTCxJQUFJLENBQUNQLE1BQU0sQ0FBQzJDLElBQUksSUFBSTNDO1lBQ3BCLElBQUksQ0FBQ0MsVUFBVSxDQUFDMEMsSUFBSSxJQUFJWDtRQUMxQjtJQUNGO0lBRUEsTUFBTVksT0FBT0MsS0FBYSxFQUFFQyxPQUFlLENBQUMsRUFBOEM7UUFDeEYsSUFBSSxJQUFJLENBQUM5QyxNQUFNLENBQUN5QixNQUFNLEtBQUssR0FBRyxPQUFPLEVBQUU7UUFDdkMsTUFBTUMsV0FBVyxNQUFNLElBQUksQ0FBQ0wsV0FBVztRQUN2QyxNQUFNMEIsTUFBTSxNQUFNckIsU0FBU21CLE9BQU87WUFBRWYsU0FBUztZQUFRQyxXQUFXO1FBQUs7UUFDckUsTUFBTWlCLElBQUksSUFBSWhDLGFBQWErQixJQUFJZCxNQUFNLEVBQUUsQ0FBQyxFQUFFO1FBQzFDLE1BQU1nQixTQUFTLElBQUksQ0FBQ2hELFVBQVUsQ0FBQ1csR0FBRyxDQUFDLENBQUNzQyxJQUFNQyxpQkFBaUJILEdBQUdFO1FBQzlELE1BQU1FLFVBQVVILE9BQU9yQyxHQUFHLENBQUMsQ0FBQ3lDLEdBQUdYLElBQU07Z0JBQUNXO2dCQUFHWDthQUFFLEVBQVdZLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNQSxDQUFDLENBQUMsRUFBRSxHQUFHRCxDQUFDLENBQUMsRUFBRSxFQUFFRSxLQUFLLENBQUMsR0FBR0MsS0FBS0MsR0FBRyxDQUFDYixNQUFNRyxPQUFPeEIsTUFBTTtRQUN2SCxPQUFPMkIsUUFBUXhDLEdBQUcsQ0FBQyxDQUFDLENBQUNnRCxPQUFPbEIsRUFBRSxHQUFNO2dCQUFFRixPQUFPLElBQUksQ0FBQ3hDLE1BQU0sQ0FBQzBDLEVBQUU7Z0JBQUVrQjtZQUFNO0lBQ3JFO0lBRUFDLFFBQVE7UUFDTixJQUFJLENBQUM3RCxNQUFNLEdBQUcsRUFBRTtRQUNoQixJQUFJLENBQUNDLFVBQVUsR0FBRyxFQUFFO1FBQ3BCLElBQUksSUFBSSxDQUFDRSxFQUFFLEVBQUU7WUFDWCxJQUFJLENBQUNBLEVBQUUsQ0FBQ0ssSUFBSSxDQUFDO1FBQ2Y7SUFDRjtJQUVBc0QsV0FBVztRQUNULE9BQU87WUFDTEMsY0FBYyxJQUFJLENBQUMvRCxNQUFNLENBQUN5QixNQUFNO1lBQ2hDdUMsV0FBVyxJQUFJLENBQUMvRCxVQUFVLENBQUMsRUFBRSxFQUFFd0IsVUFBVTtZQUN6Q3dDLFlBQVksSUFBSSxDQUFDbkUsU0FBUztZQUMxQm9FLFlBQVksSUFBSSxDQUFDakUsVUFBVSxDQUFDd0IsTUFBTTtRQUNwQztJQUNGO0FBQ0Y7QUFFQSxTQUFTMEIsaUJBQWlCSSxDQUFlLEVBQUVDLENBQWU7SUFDeEQsSUFBSVcsTUFBTTtJQUNWLElBQUlDLEtBQUs7SUFDVCxJQUFJQyxLQUFLO0lBQ1QsSUFBSyxJQUFJM0IsSUFBSSxHQUFHQSxJQUFJYSxFQUFFOUIsTUFBTSxJQUFJaUIsSUFBSWMsRUFBRS9CLE1BQU0sRUFBRWlCLElBQUs7UUFDakR5QixPQUFPWixDQUFDLENBQUNiLEVBQUUsR0FBR2MsQ0FBQyxDQUFDZCxFQUFFO1FBQ2xCMEIsTUFBTWIsQ0FBQyxDQUFDYixFQUFFLEdBQUdhLENBQUMsQ0FBQ2IsRUFBRTtRQUNqQjJCLE1BQU1iLENBQUMsQ0FBQ2QsRUFBRSxHQUFHYyxDQUFDLENBQUNkLEVBQUU7SUFDbkI7SUFDQSxJQUFJMEIsT0FBTyxLQUFLQyxPQUFPLEdBQUcsT0FBTztJQUNqQyxPQUFPRixNQUFPVCxDQUFBQSxLQUFLWSxJQUFJLENBQUNGLE1BQU1WLEtBQUtZLElBQUksQ0FBQ0QsR0FBRTtBQUM1QyIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3MtY2hhdC1uZXh0Ly4vbGliL3ZlY3RvclN0b3JlLnRzPzQzMzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGlwZWxpbmUgfSBmcm9tIFwiQHhlbm92YS90cmFuc2Zvcm1lcnNcIjtcclxuaW1wb3J0IHR5cGUgeyBDaHVuayB9IGZyb20gXCIuL3RleHRDaHVua2VyXCI7XHJcbmltcG9ydCBEYXRhYmFzZSBmcm9tIFwiYmV0dGVyLXNxbGl0ZTNcIjtcclxuXHJcbnR5cGUgRW1iZWRkaW5nID0gRmxvYXQzMkFycmF5O1xyXG5cclxuZXhwb3J0IGNsYXNzIFZlY3RvclN0b3JlIHtcclxuICBwcml2YXRlIGNodW5rczogQ2h1bmtbXSA9IFtdO1xyXG4gIHByaXZhdGUgZW1iZWRkaW5nczogRW1iZWRkaW5nW10gPSBbXTtcclxuICBwcml2YXRlIGVtYmVkZGVyUHJvbWlzZTogUHJvbWlzZTxhbnk+IHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBtb2RlbE5hbWU6IHN0cmluZztcclxuICBwcml2YXRlIGRiOiBEYXRhYmFzZS5EYXRhYmFzZSB8IG51bGwgPSBudWxsO1xyXG4gIHByaXZhdGUgdXNlU3FsaXRlOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihtb2RlbE5hbWU6IHN0cmluZywgZGJQYXRoPzogc3RyaW5nKSB7XHJcbiAgICB0aGlzLm1vZGVsTmFtZSA9IG1vZGVsTmFtZTtcclxuICAgIHRoaXMudXNlU3FsaXRlID0gQm9vbGVhbihkYlBhdGgpO1xyXG4gICAgaWYgKGRiUGF0aCkge1xyXG4gICAgICB0aGlzLmRiID0gbmV3IERhdGFiYXNlKGRiUGF0aCk7XHJcbiAgICAgIHRoaXMuaW5pdERiKCk7XHJcbiAgICAgIHRoaXMubG9hZEZyb21EYigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0RGIoKSB7XHJcbiAgICBpZiAoIXRoaXMuZGIpIHJldHVybjtcclxuICAgIHRoaXMuZGIuZXhlYyhgXHJcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGNodW5rcyAoXHJcbiAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSxcclxuICAgICAgICB0ZXh0IFRFWFQgTk9UIE5VTExcclxuICAgICAgKTtcclxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgZW1iZWRkaW5ncyAoXHJcbiAgICAgICAgY2h1bmtfaWQgSU5URUdFUiBQUklNQVJZIEtFWSxcclxuICAgICAgICB2ZWN0b3IgQkxPQiBOT1QgTlVMTCxcclxuICAgICAgICBGT1JFSUdOIEtFWShjaHVua19pZCkgUkVGRVJFTkNFUyBjaHVua3MoaWQpIE9OIERFTEVURSBDQVNDQURFXHJcbiAgICAgICk7XHJcbiAgICBgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbG9hZEZyb21EYigpIHtcclxuICAgIGlmICghdGhpcy5kYikgcmV0dXJuO1xyXG4gICAgY29uc3Qgcm93cyA9IHRoaXMuZGIucHJlcGFyZShcIlNFTEVDVCBjLmlkLCBjLnRleHQsIGUudmVjdG9yIEZST00gY2h1bmtzIGMgSk9JTiBlbWJlZGRpbmdzIGUgT04gZS5jaHVua19pZCA9IGMuaWQgT1JERVIgQlkgYy5pZFwiKS5hbGwoKTtcclxuICAgIHRoaXMuY2h1bmtzID0gcm93cy5tYXAoKHI6IGFueSkgPT4gKHsgaWQ6IHIuaWQsIHRleHQ6IHIudGV4dCB9KSk7XHJcbiAgICB0aGlzLmVtYmVkZGluZ3MgPSByb3dzLm1hcCgocjogYW55KSA9PiBuZXcgRmxvYXQzMkFycmF5KEJ1ZmZlci5mcm9tKHIudmVjdG9yKS5idWZmZXIpKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgZ2V0RW1iZWRkZXIoKSB7XHJcbiAgICBpZiAoIXRoaXMuZW1iZWRkZXJQcm9taXNlKSB7XHJcbiAgICAgIGNvbnN0IG1vZGVsID0gdGhpcy5tb2RlbE5hbWUuaW5jbHVkZXMoJy8nKSA/IHRoaXMubW9kZWxOYW1lIDogYFhlbm92YS8ke3RoaXMubW9kZWxOYW1lfWA7XHJcbiAgICAgIHRoaXMuZW1iZWRkZXJQcm9taXNlID0gcGlwZWxpbmUoXCJmZWF0dXJlLWV4dHJhY3Rpb25cIiwgbW9kZWwpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZW1iZWRkZXJQcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgYWRkRG9jdW1lbnRzKGNodW5rczogQ2h1bmtbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgaWYgKCFjaHVua3MubGVuZ3RoKSByZXR1cm47XHJcbiAgICBjb25zdCBlbWJlZGRlciA9IGF3YWl0IHRoaXMuZ2V0RW1iZWRkZXIoKTtcclxuICAgIGNvbnN0IHRleHRzID0gY2h1bmtzLm1hcChjID0+IGMudGV4dCk7XHJcbiAgICBjb25zdCBvdXRwdXRzID0gYXdhaXQgZW1iZWRkZXIodGV4dHMsIHsgcG9vbGluZzogXCJtZWFuXCIsIG5vcm1hbGl6ZTogdHJ1ZSB9KTtcclxuICAgIGNvbnN0IHZlY3RvcnM6IEVtYmVkZGluZ1tdID0gb3V0cHV0cy50b2xpc3QoKS5tYXAoKHJvdzogbnVtYmVyW10pID0+IG5ldyBGbG9hdDMyQXJyYXkocm93KSk7XHJcbiAgICBpZiAodGhpcy5kYikge1xyXG4gICAgICBjb25zdCBpbnNlcnRDaHVuayA9IHRoaXMuZGIucHJlcGFyZShcIklOU0VSVCBJTlRPIGNodW5rcyAoaWQsIHRleHQpIFZBTFVFUyAoPywgPylcIik7XHJcbiAgICAgIGNvbnN0IGluc2VydEVtYmVkZGluZyA9IHRoaXMuZGIucHJlcGFyZShcIklOU0VSVCBJTlRPIGVtYmVkZGluZ3MgKGNodW5rX2lkLCB2ZWN0b3IpIFZBTFVFUyAoPywgPylcIik7XHJcbiAgICAgIGNvbnN0IHRyeCA9IHRoaXMuZGIudHJhbnNhY3Rpb24oKHBhaXJzOiB7IGNodW5rOiBDaHVuazsgdmVjdG9yOiBFbWJlZGRpbmcgfVtdKSA9PiB7XHJcbiAgICAgICAgZm9yIChjb25zdCB7IGNodW5rLCB2ZWN0b3IgfSBvZiBwYWlycykge1xyXG4gICAgICAgICAgaW5zZXJ0Q2h1bmsucnVuKGNodW5rLmlkLCBjaHVuay50ZXh0KTtcclxuICAgICAgICAgIGluc2VydEVtYmVkZGluZy5ydW4oY2h1bmsuaWQsIEJ1ZmZlci5mcm9tKHZlY3Rvci5idWZmZXIpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCBwYWlycyA9IGNodW5rcy5tYXAoKGNodW5rLCBpKSA9PiAoeyBjaHVuaywgdmVjdG9yOiB2ZWN0b3JzW2ldIH0pKTtcclxuICAgICAgdHJ4KHBhaXJzKTtcclxuICAgICAgdGhpcy5sb2FkRnJvbURiKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNodW5rcy5wdXNoKC4uLmNodW5rcyk7XHJcbiAgICAgIHRoaXMuZW1iZWRkaW5ncy5wdXNoKC4uLnZlY3RvcnMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2VhcmNoKHF1ZXJ5OiBzdHJpbmcsIHRvcEs6IG51bWJlciA9IDUpOiBQcm9taXNlPHsgY2h1bms6IENodW5rOyBzY29yZTogbnVtYmVyIH1bXT4ge1xyXG4gICAgaWYgKHRoaXMuY2h1bmtzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xyXG4gICAgY29uc3QgZW1iZWRkZXIgPSBhd2FpdCB0aGlzLmdldEVtYmVkZGVyKCk7XHJcbiAgICBjb25zdCBvdXQgPSBhd2FpdCBlbWJlZGRlcihxdWVyeSwgeyBwb29saW5nOiBcIm1lYW5cIiwgbm9ybWFsaXplOiB0cnVlIH0pO1xyXG4gICAgY29uc3QgcSA9IG5ldyBGbG9hdDMyQXJyYXkob3V0LnRvbGlzdCgpWzBdKTtcclxuICAgIGNvbnN0IHNjb3JlcyA9IHRoaXMuZW1iZWRkaW5ncy5tYXAoKHYpID0+IGNvc2luZVNpbWlsYXJpdHkocSwgdikpO1xyXG4gICAgY29uc3QgaW5kaWNlcyA9IHNjb3Jlcy5tYXAoKHMsIGkpID0+IFtzLCBpXSBhcyBjb25zdCkuc29ydCgoYSwgYikgPT4gYlswXSAtIGFbMF0pLnNsaWNlKDAsIE1hdGgubWluKHRvcEssIHNjb3Jlcy5sZW5ndGgpKTtcclxuICAgIHJldHVybiBpbmRpY2VzLm1hcCgoW3Njb3JlLCBpXSkgPT4gKHsgY2h1bms6IHRoaXMuY2h1bmtzW2ldLCBzY29yZSB9KSk7XHJcbiAgfVxyXG5cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMuY2h1bmtzID0gW107XHJcbiAgICB0aGlzLmVtYmVkZGluZ3MgPSBbXTtcclxuICAgIGlmICh0aGlzLmRiKSB7XHJcbiAgICAgIHRoaXMuZGIuZXhlYyhcIkRFTEVURSBGUk9NIGVtYmVkZGluZ3M7IERFTEVURSBGUk9NIGNodW5rcztcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRTdGF0cygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRvdGFsX2NodW5rczogdGhpcy5jaHVua3MubGVuZ3RoLFxyXG4gICAgICBkaW1lbnNpb246IHRoaXMuZW1iZWRkaW5nc1swXT8ubGVuZ3RoIHx8IDAsXHJcbiAgICAgIG1vZGVsX25hbWU6IHRoaXMubW9kZWxOYW1lLFxyXG4gICAgICBpbmRleF9zaXplOiB0aGlzLmVtYmVkZGluZ3MubGVuZ3RoLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvc2luZVNpbWlsYXJpdHkoYTogRmxvYXQzMkFycmF5LCBiOiBGbG9hdDMyQXJyYXkpOiBudW1iZXIge1xyXG4gIGxldCBkb3QgPSAwO1xyXG4gIGxldCBuYSA9IDA7XHJcbiAgbGV0IG5iID0gMDtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoICYmIGkgPCBiLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBkb3QgKz0gYVtpXSAqIGJbaV07XHJcbiAgICBuYSArPSBhW2ldICogYVtpXTtcclxuICAgIG5iICs9IGJbaV0gKiBiW2ldO1xyXG4gIH1cclxuICBpZiAobmEgPT09IDAgfHwgbmIgPT09IDApIHJldHVybiAwO1xyXG4gIHJldHVybiBkb3QgLyAoTWF0aC5zcXJ0KG5hKSAqIE1hdGguc3FydChuYikpO1xyXG59XHJcblxyXG4iXSwibmFtZXMiOlsicGlwZWxpbmUiLCJEYXRhYmFzZSIsIlZlY3RvclN0b3JlIiwiY29uc3RydWN0b3IiLCJtb2RlbE5hbWUiLCJkYlBhdGgiLCJjaHVua3MiLCJlbWJlZGRpbmdzIiwiZW1iZWRkZXJQcm9taXNlIiwiZGIiLCJ1c2VTcWxpdGUiLCJCb29sZWFuIiwiaW5pdERiIiwibG9hZEZyb21EYiIsImV4ZWMiLCJyb3dzIiwicHJlcGFyZSIsImFsbCIsIm1hcCIsInIiLCJpZCIsInRleHQiLCJGbG9hdDMyQXJyYXkiLCJCdWZmZXIiLCJmcm9tIiwidmVjdG9yIiwiYnVmZmVyIiwiZ2V0RW1iZWRkZXIiLCJtb2RlbCIsImluY2x1ZGVzIiwiYWRkRG9jdW1lbnRzIiwibGVuZ3RoIiwiZW1iZWRkZXIiLCJ0ZXh0cyIsImMiLCJvdXRwdXRzIiwicG9vbGluZyIsIm5vcm1hbGl6ZSIsInZlY3RvcnMiLCJ0b2xpc3QiLCJyb3ciLCJpbnNlcnRDaHVuayIsImluc2VydEVtYmVkZGluZyIsInRyeCIsInRyYW5zYWN0aW9uIiwicGFpcnMiLCJjaHVuayIsInJ1biIsImkiLCJwdXNoIiwic2VhcmNoIiwicXVlcnkiLCJ0b3BLIiwib3V0IiwicSIsInNjb3JlcyIsInYiLCJjb3NpbmVTaW1pbGFyaXR5IiwiaW5kaWNlcyIsInMiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsIk1hdGgiLCJtaW4iLCJzY29yZSIsImNsZWFyIiwiZ2V0U3RhdHMiLCJ0b3RhbF9jaHVua3MiLCJkaW1lbnNpb24iLCJtb2RlbF9uYW1lIiwiaW5kZXhfc2l6ZSIsImRvdCIsIm5hIiwibmIiLCJzcXJ0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/vectorStore.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@xenova","vendor-chunks/onnxruntime-web","vendor-chunks/@huggingface","vendor-chunks/onnxruntime-common","vendor-chunks/remove-markdown"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();