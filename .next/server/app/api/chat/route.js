"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("better-sqlite3");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "onnxruntime-node":
/*!***********************************!*\
  !*** external "onnxruntime-node" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("onnxruntime-node");

/***/ }),

/***/ "sharp":
/*!************************!*\
  !*** external "sharp" ***!
  \************************/
/***/ ((module) => {

module.exports = require("sharp");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "perf_hooks":
/*!*****************************!*\
  !*** external "perf_hooks" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("perf_hooks");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_komar_Desktop_docs_chat_master_docs_chat_master_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/chat/route.ts */ \"(rsc)/./app/api/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\komar\\\\Desktop\\\\docs-chat-master\\\\docs-chat-master\\\\app\\\\api\\\\chat\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_komar_Desktop_docs_chat_master_docs_chat_master_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/chat/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNrb21hciU1Q0Rlc2t0b3AlNUNkb2NzLWNoYXQtbWFzdGVyJTVDZG9jcy1jaGF0LW1hc3RlciU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDa29tYXIlNUNEZXNrdG9wJTVDZG9jcy1jaGF0LW1hc3RlciU1Q2RvY3MtY2hhdC1tYXN0ZXImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3VDO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jcy1jaGF0LW5leHQvPzViNzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxca29tYXJcXFxcRGVza3RvcFxcXFxkb2NzLWNoYXQtbWFzdGVyXFxcXGRvY3MtY2hhdC1tYXN0ZXJcXFxcYXBwXFxcXGFwaVxcXFxjaGF0XFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGF0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hhdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2hhdC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGtvbWFyXFxcXERlc2t0b3BcXFxcZG9jcy1jaGF0LW1hc3RlclxcXFxkb2NzLWNoYXQtbWFzdGVyXFxcXGFwcFxcXFxhcGlcXFxcY2hhdFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY2hhdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/_state.ts":
/*!***************************!*\
  !*** ./app/api/_state.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chunker: () => (/* binding */ chunker),\n/* harmony export */   sessions: () => (/* binding */ sessions),\n/* harmony export */   store: () => (/* binding */ store)\n/* harmony export */ });\n/* harmony import */ var _lib_settings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/settings */ \"(rsc)/./lib/settings.ts\");\n/* harmony import */ var _lib_textChunker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/textChunker */ \"(rsc)/./lib/textChunker.ts\");\n/* harmony import */ var _lib_vectorStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/vectorStore */ \"(rsc)/./lib/vectorStore.ts\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! node:fs */ \"node:fs\");\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(node_fs__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nconst chunker = new _lib_textChunker__WEBPACK_IMPORTED_MODULE_1__.TextChunker(_lib_settings__WEBPACK_IMPORTED_MODULE_0__.settings.MAX_CHUNK_SIZE, _lib_settings__WEBPACK_IMPORTED_MODULE_0__.settings.CHUNK_OVERLAP);\nconst defaultDbPath = process.env.SQLITE_PATH || node_path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"data\", \"index.sqlite\");\ntry {\n    const dir = node_path__WEBPACK_IMPORTED_MODULE_3___default().dirname(defaultDbPath);\n    if (!node_fs__WEBPACK_IMPORTED_MODULE_4___default().existsSync(dir)) {\n        node_fs__WEBPACK_IMPORTED_MODULE_4___default().mkdirSync(dir, {\n            recursive: true\n        });\n    }\n} catch  {}\nconst store = new _lib_vectorStore__WEBPACK_IMPORTED_MODULE_2__.VectorStore(_lib_settings__WEBPACK_IMPORTED_MODULE_0__.settings.EMBEDDING_MODEL, defaultDbPath);\nconst sessions = new Map();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL19zdGF0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTBDO0FBQ007QUFDQTtBQUNuQjtBQUNKO0FBSWxCLE1BQU1LLFVBQVUsSUFBSUoseURBQVdBLENBQUNELG1EQUFRQSxDQUFDTSxjQUFjLEVBQUVOLG1EQUFRQSxDQUFDTyxhQUFhLEVBQUU7QUFDeEYsTUFBTUMsZ0JBQWdCQyxRQUFRQyxHQUFHLENBQUNDLFdBQVcsSUFBSVIscURBQVMsQ0FBQ00sUUFBUUksR0FBRyxJQUFJLFFBQVE7QUFDbEYsSUFBSTtJQUNGLE1BQU1DLE1BQU1YLHdEQUFZLENBQUNLO0lBQ3pCLElBQUksQ0FBQ0oseURBQWEsQ0FBQ1UsTUFBTTtRQUN2QlYsd0RBQVksQ0FBQ1UsS0FBSztZQUFFSSxXQUFXO1FBQUs7SUFDdEM7QUFDRixFQUFFLE9BQU0sQ0FBQztBQUNGLE1BQU1DLFFBQVEsSUFBSWpCLHlEQUFXQSxDQUFDRixtREFBUUEsQ0FBQ29CLGVBQWUsRUFBRVosZUFBZTtBQUN2RSxNQUFNYSxXQUFXLElBQUlDLE1BQTZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jcy1jaGF0LW5leHQvLi9hcHAvYXBpL19zdGF0ZS50cz80YWM2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNldHRpbmdzIH0gZnJvbSBcIkAvbGliL3NldHRpbmdzXCI7XHJcbmltcG9ydCB7IFRleHRDaHVua2VyIH0gZnJvbSBcIkAvbGliL3RleHRDaHVua2VyXCI7XHJcbmltcG9ydCB7IFZlY3RvclN0b3JlIH0gZnJvbSBcIkAvbGliL3ZlY3RvclN0b3JlXCI7XHJcbmltcG9ydCBwYXRoIGZyb20gXCJub2RlOnBhdGhcIjtcclxuaW1wb3J0IGZzIGZyb20gXCJub2RlOmZzXCI7XHJcblxyXG5leHBvcnQgdHlwZSBDaGF0TWVzc2FnZSA9IHsgcm9sZTogXCJ1c2VyXCIgfCBcImFzc2lzdGFudFwiOyBjb250ZW50OiBzdHJpbmcgfTtcclxuXHJcbmV4cG9ydCBjb25zdCBjaHVua2VyID0gbmV3IFRleHRDaHVua2VyKHNldHRpbmdzLk1BWF9DSFVOS19TSVpFLCBzZXR0aW5ncy5DSFVOS19PVkVSTEFQKTtcclxuY29uc3QgZGVmYXVsdERiUGF0aCA9IHByb2Nlc3MuZW52LlNRTElURV9QQVRIIHx8IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCBcImRhdGFcIiwgXCJpbmRleC5zcWxpdGVcIik7XHJcbnRyeSB7XHJcbiAgY29uc3QgZGlyID0gcGF0aC5kaXJuYW1lKGRlZmF1bHREYlBhdGgpO1xyXG4gIGlmICghZnMuZXhpc3RzU3luYyhkaXIpKSB7XHJcbiAgICBmcy5ta2RpclN5bmMoZGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuICB9XHJcbn0gY2F0Y2gge31cclxuZXhwb3J0IGNvbnN0IHN0b3JlID0gbmV3IFZlY3RvclN0b3JlKHNldHRpbmdzLkVNQkVERElOR19NT0RFTCwgZGVmYXVsdERiUGF0aCk7XHJcbmV4cG9ydCBjb25zdCBzZXNzaW9ucyA9IG5ldyBNYXA8c3RyaW5nLCBDaGF0TWVzc2FnZVtdPigpO1xyXG5cclxuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiVGV4dENodW5rZXIiLCJWZWN0b3JTdG9yZSIsInBhdGgiLCJmcyIsImNodW5rZXIiLCJNQVhfQ0hVTktfU0laRSIsIkNIVU5LX09WRVJMQVAiLCJkZWZhdWx0RGJQYXRoIiwicHJvY2VzcyIsImVudiIsIlNRTElURV9QQVRIIiwiam9pbiIsImN3ZCIsImRpciIsImRpcm5hbWUiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwic3RvcmUiLCJFTUJFRERJTkdfTU9ERUwiLCJzZXNzaW9ucyIsIk1hcCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/_state.ts\n");

/***/ }),

/***/ "(rsc)/./app/api/chat/route.ts":
/*!*******************************!*\
  !*** ./app/api/chat/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_state */ \"(rsc)/./app/api/_state.ts\");\n/* harmony import */ var _lib_gemini__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/gemini */ \"(rsc)/./lib/gemini.ts\");\n\n\n\nconst runtime = \"nodejs\";\nasync function POST(req) {\n    const body = await req.json().catch(()=>({}));\n    const { session_id, query, top_k = 5 } = body;\n    if (!query || !query.trim()) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        detail: \"Query cannot be empty\"\n    }, {\n        status: 400\n    });\n    if (!_state__WEBPACK_IMPORTED_MODULE_1__.sessions.has(session_id)) {\n        _state__WEBPACK_IMPORTED_MODULE_1__.sessions.set(session_id, []);\n    }\n    if (_state__WEBPACK_IMPORTED_MODULE_1__.store.getStats().index_size === 0) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            detail: \"No documents uploaded. Please upload a document first.\"\n        }, {\n            status: 400\n        });\n    }\n    const history = _state__WEBPACK_IMPORTED_MODULE_1__.sessions.get(session_id);\n    history.push({\n        role: \"user\",\n        content: query\n    });\n    try {\n        const results = await _state__WEBPACK_IMPORTED_MODULE_1__.store.search(query, top_k);\n        if (!results.length) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                session_id,\n                query,\n                response: \"I couldn't find relevant information in the document to answer your question.\",\n                relevant_chunks: [],\n                chunk_count: 0\n            });\n        }\n        const prompt = (0,_lib_gemini__WEBPACK_IMPORTED_MODULE_2__.buildRagPrompt)(query, results.map((r)=>({\n                text: r.chunk.text\n            })), history);\n        const answer = await (0,_lib_gemini__WEBPACK_IMPORTED_MODULE_2__.generateWithGemini)(prompt);\n        history.push({\n            role: \"assistant\",\n            content: answer\n        });\n        const chunk_info = results.map((r)=>({\n                id: r.chunk.id,\n                text: r.chunk.text.length > 200 ? r.chunk.text.slice(0, 200) + \"...\" : r.chunk.text,\n                score: r.score\n            }));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            session_id,\n            query,\n            response: answer,\n            relevant_chunks: chunk_info,\n            chunk_count: results.length\n        });\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            detail: `Error generating response: ${e.message || e}`\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NoYXQvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMkM7QUFDQztBQUNzQjtBQUkzRCxNQUFNSyxVQUFVLFNBQVM7QUFFekIsZUFBZUMsS0FBS0MsR0FBWTtJQUNyQyxNQUFNQyxPQUFRLE1BQU1ELElBQUlFLElBQUksR0FBR0MsS0FBSyxDQUFDLElBQU8sRUFBQztJQUM3QyxNQUFNLEVBQUVDLFVBQVUsRUFBRUMsS0FBSyxFQUFFQyxRQUFRLENBQUMsRUFBRSxHQUFHTDtJQUN6QyxJQUFJLENBQUNJLFNBQVMsQ0FBQ0EsTUFBTUUsSUFBSSxJQUFJLE9BQU9kLHFEQUFZQSxDQUFDUyxJQUFJLENBQUM7UUFBRU0sUUFBUTtJQUF3QixHQUFHO1FBQUVDLFFBQVE7SUFBSTtJQUV6RyxJQUFJLENBQUNmLDRDQUFRQSxDQUFDZ0IsR0FBRyxDQUFDTixhQUFhO1FBQzdCViw0Q0FBUUEsQ0FBQ2lCLEdBQUcsQ0FBQ1AsWUFBWSxFQUFFO0lBQzdCO0lBRUEsSUFBSVQseUNBQUtBLENBQUNpQixRQUFRLEdBQUdDLFVBQVUsS0FBSyxHQUFHO1FBQ3JDLE9BQU9wQixxREFBWUEsQ0FBQ1MsSUFBSSxDQUFDO1lBQUVNLFFBQVE7UUFBeUQsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDL0c7SUFFQSxNQUFNSyxVQUFVcEIsNENBQVFBLENBQUNxQixHQUFHLENBQUNYO0lBQzdCVSxRQUFRRSxJQUFJLENBQUM7UUFBRUMsTUFBTTtRQUFRQyxTQUFTYjtJQUFNO0lBRTVDLElBQUk7UUFDRixNQUFNYyxVQUFVLE1BQU14Qix5Q0FBS0EsQ0FBQ3lCLE1BQU0sQ0FBQ2YsT0FBT0M7UUFDMUMsSUFBSSxDQUFDYSxRQUFRRSxNQUFNLEVBQUU7WUFDbkIsT0FBTzVCLHFEQUFZQSxDQUFDUyxJQUFJLENBQUM7Z0JBQUVFO2dCQUFZQztnQkFBT2lCLFVBQVU7Z0JBQWlGQyxpQkFBaUIsRUFBRTtnQkFBRUMsYUFBYTtZQUFFO1FBQy9LO1FBQ0EsTUFBTUMsU0FBUzdCLDJEQUFjQSxDQUFDUyxPQUFPYyxRQUFRTyxHQUFHLENBQUNDLENBQUFBLElBQU07Z0JBQUVDLE1BQU1ELEVBQUVFLEtBQUssQ0FBQ0QsSUFBSTtZQUFDLEtBQUtkO1FBQ2pGLE1BQU1nQixTQUFTLE1BQU1qQywrREFBa0JBLENBQUM0QjtRQUN4Q1gsUUFBUUUsSUFBSSxDQUFDO1lBQUVDLE1BQU07WUFBYUMsU0FBU1k7UUFBTztRQUNsRCxNQUFNQyxhQUFhWixRQUFRTyxHQUFHLENBQUNDLENBQUFBLElBQU07Z0JBQUVLLElBQUlMLEVBQUVFLEtBQUssQ0FBQ0csRUFBRTtnQkFBRUosTUFBTUQsRUFBRUUsS0FBSyxDQUFDRCxJQUFJLENBQUNQLE1BQU0sR0FBRyxNQUFNTSxFQUFFRSxLQUFLLENBQUNELElBQUksQ0FBQ0ssS0FBSyxDQUFDLEdBQUcsT0FBTyxRQUFRTixFQUFFRSxLQUFLLENBQUNELElBQUk7Z0JBQUVNLE9BQU9QLEVBQUVPLEtBQUs7WUFBQztRQUMzSixPQUFPekMscURBQVlBLENBQUNTLElBQUksQ0FBQztZQUFFRTtZQUFZQztZQUFPaUIsVUFBVVE7WUFBUVAsaUJBQWlCUTtZQUFZUCxhQUFhTCxRQUFRRSxNQUFNO1FBQUM7SUFDM0gsRUFBRSxPQUFPYyxHQUFRO1FBQ2YsT0FBTzFDLHFEQUFZQSxDQUFDUyxJQUFJLENBQUM7WUFBRU0sUUFBUSxDQUFDLDJCQUEyQixFQUFFMkIsRUFBRUMsT0FBTyxJQUFJRCxFQUFFLENBQUM7UUFBQyxHQUFHO1lBQUUxQixRQUFRO1FBQUk7SUFDckc7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3MtY2hhdC1uZXh0Ly4vYXBwL2FwaS9jaGF0L3JvdXRlLnRzP2RlNDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcbmltcG9ydCB7IHNlc3Npb25zLCBzdG9yZSB9IGZyb20gXCIuLi9fc3RhdGVcIjtcclxuaW1wb3J0IHsgYnVpbGRSYWdQcm9tcHQsIGdlbmVyYXRlV2l0aEdlbWluaSB9IGZyb20gXCJAL2xpYi9nZW1pbmlcIjtcclxuXHJcbnR5cGUgQ2hhdFJlcXVlc3QgPSB7IHNlc3Npb25faWQ6IHN0cmluZzsgcXVlcnk6IHN0cmluZzsgdG9wX2s/OiBudW1iZXIgfTtcclxuXHJcbmV4cG9ydCBjb25zdCBydW50aW1lID0gXCJub2RlanNcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogUmVxdWVzdCkge1xyXG4gIGNvbnN0IGJvZHkgPSAoYXdhaXQgcmVxLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKSkgYXMgQ2hhdFJlcXVlc3Q7XHJcbiAgY29uc3QgeyBzZXNzaW9uX2lkLCBxdWVyeSwgdG9wX2sgPSA1IH0gPSBib2R5O1xyXG4gIGlmICghcXVlcnkgfHwgIXF1ZXJ5LnRyaW0oKSkgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZGV0YWlsOiBcIlF1ZXJ5IGNhbm5vdCBiZSBlbXB0eVwiIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcblxyXG4gIGlmICghc2Vzc2lvbnMuaGFzKHNlc3Npb25faWQpKSB7XHJcbiAgICBzZXNzaW9ucy5zZXQoc2Vzc2lvbl9pZCwgW10pO1xyXG4gIH1cclxuXHJcbiAgaWYgKHN0b3JlLmdldFN0YXRzKCkuaW5kZXhfc2l6ZSA9PT0gMCkge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZGV0YWlsOiBcIk5vIGRvY3VtZW50cyB1cGxvYWRlZC4gUGxlYXNlIHVwbG9hZCBhIGRvY3VtZW50IGZpcnN0LlwiIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBoaXN0b3J5ID0gc2Vzc2lvbnMuZ2V0KHNlc3Npb25faWQpITtcclxuICBoaXN0b3J5LnB1c2goeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogcXVlcnkgfSk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgc3RvcmUuc2VhcmNoKHF1ZXJ5LCB0b3Bfayk7XHJcbiAgICBpZiAoIXJlc3VsdHMubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHNlc3Npb25faWQsIHF1ZXJ5LCByZXNwb25zZTogXCJJIGNvdWxkbid0IGZpbmQgcmVsZXZhbnQgaW5mb3JtYXRpb24gaW4gdGhlIGRvY3VtZW50IHRvIGFuc3dlciB5b3VyIHF1ZXN0aW9uLlwiLCByZWxldmFudF9jaHVua3M6IFtdLCBjaHVua19jb3VudDogMCB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IHByb21wdCA9IGJ1aWxkUmFnUHJvbXB0KHF1ZXJ5LCByZXN1bHRzLm1hcChyID0+ICh7IHRleHQ6IHIuY2h1bmsudGV4dCB9KSksIGhpc3RvcnkpO1xyXG4gICAgY29uc3QgYW5zd2VyID0gYXdhaXQgZ2VuZXJhdGVXaXRoR2VtaW5pKHByb21wdCk7XHJcbiAgICBoaXN0b3J5LnB1c2goeyByb2xlOiBcImFzc2lzdGFudFwiLCBjb250ZW50OiBhbnN3ZXIgfSk7XHJcbiAgICBjb25zdCBjaHVua19pbmZvID0gcmVzdWx0cy5tYXAociA9PiAoeyBpZDogci5jaHVuay5pZCwgdGV4dDogci5jaHVuay50ZXh0Lmxlbmd0aCA+IDIwMCA/IHIuY2h1bmsudGV4dC5zbGljZSgwLCAyMDApICsgXCIuLi5cIiA6IHIuY2h1bmsudGV4dCwgc2NvcmU6IHIuc2NvcmUgfSkpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc2Vzc2lvbl9pZCwgcXVlcnksIHJlc3BvbnNlOiBhbnN3ZXIsIHJlbGV2YW50X2NodW5rczogY2h1bmtfaW5mbywgY2h1bmtfY291bnQ6IHJlc3VsdHMubGVuZ3RoIH0pO1xyXG4gIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZGV0YWlsOiBgRXJyb3IgZ2VuZXJhdGluZyByZXNwb25zZTogJHtlLm1lc3NhZ2UgfHwgZX1gIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwic2Vzc2lvbnMiLCJzdG9yZSIsImJ1aWxkUmFnUHJvbXB0IiwiZ2VuZXJhdGVXaXRoR2VtaW5pIiwicnVudGltZSIsIlBPU1QiLCJyZXEiLCJib2R5IiwianNvbiIsImNhdGNoIiwic2Vzc2lvbl9pZCIsInF1ZXJ5IiwidG9wX2siLCJ0cmltIiwiZGV0YWlsIiwic3RhdHVzIiwiaGFzIiwic2V0IiwiZ2V0U3RhdHMiLCJpbmRleF9zaXplIiwiaGlzdG9yeSIsImdldCIsInB1c2giLCJyb2xlIiwiY29udGVudCIsInJlc3VsdHMiLCJzZWFyY2giLCJsZW5ndGgiLCJyZXNwb25zZSIsInJlbGV2YW50X2NodW5rcyIsImNodW5rX2NvdW50IiwicHJvbXB0IiwibWFwIiwiciIsInRleHQiLCJjaHVuayIsImFuc3dlciIsImNodW5rX2luZm8iLCJpZCIsInNsaWNlIiwic2NvcmUiLCJlIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/gemini.ts":
/*!***********************!*\
  !*** ./lib/gemini.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildRagPrompt: () => (/* binding */ buildRagPrompt),\n/* harmony export */   generateWithGemini: () => (/* binding */ generateWithGemini)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./settings */ \"(rsc)/./lib/settings.ts\");\n\n\nfunction buildRagPrompt(query, relevant, history) {\n    const contexts = relevant.map((c, i)=>`[Context ${i + 1}]:\\n${c.text || \"\"}\\n`).join(\"\\n\");\n    const hist = (history || []).slice(-5).map((m)=>`${capitalize(m.role)}: ${m.content}`).join(\"\\n\");\n    return `${_settings__WEBPACK_IMPORTED_MODULE_1__.SYSTEM_PROMPT}\r\n\r\nDOCUMENT CONTEXT:\r\n${contexts}\r\n\r\n${hist ? `CONVERSATION HISTORY:\\n${hist}\\n\\n` : \"\"}USER QUESTION:\r\n${query}\r\n\r\nANSWER:`;\n}\nasync function generateWithGemini(prompt) {\n    if (!_settings__WEBPACK_IMPORTED_MODULE_1__.settings.GEMINI_API_KEY) {\n        throw new Error(\"GEMINI_API_KEY not set\");\n    }\n    const genai = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(_settings__WEBPACK_IMPORTED_MODULE_1__.settings.GEMINI_API_KEY);\n    const model = genai.getGenerativeModel({\n        model: _settings__WEBPACK_IMPORTED_MODULE_1__.settings.GEMINI_MODEL\n    });\n    const result = await model.generateContent({\n        contents: [\n            {\n                role: \"user\",\n                parts: [\n                    {\n                        text: prompt\n                    }\n                ]\n            }\n        ]\n    });\n    const text = result.response.text();\n    return text;\n}\nfunction capitalize(s) {\n    return s ? s[0].toUpperCase() + s.slice(1) : s;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZ2VtaW5pLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkQ7QUFDTjtBQUU5QyxTQUFTRyxlQUFlQyxLQUFhLEVBQUVDLFFBQTZCLEVBQUVDLE9BQTZDO0lBQ3hILE1BQU1DLFdBQVdGLFNBQVNHLEdBQUcsQ0FBQyxDQUFDQyxHQUFHQyxJQUFNLENBQUMsU0FBUyxFQUFFQSxJQUFJLEVBQUUsSUFBSSxFQUFFRCxFQUFFRSxJQUFJLElBQUksR0FBRyxFQUFFLENBQUMsRUFBRUMsSUFBSSxDQUFDO0lBQ3ZGLE1BQU1DLE9BQU8sQ0FBQ1AsV0FBVyxFQUFFLEVBQUVRLEtBQUssQ0FBQyxDQUFDLEdBQUdOLEdBQUcsQ0FBQ08sQ0FBQUEsSUFBSyxDQUFDLEVBQUVDLFdBQVdELEVBQUVFLElBQUksRUFBRSxFQUFFLEVBQUVGLEVBQUVHLE9BQU8sQ0FBQyxDQUFDLEVBQUVOLElBQUksQ0FBQztJQUM1RixPQUFPLENBQUMsRUFBRVgsb0RBQWFBLENBQUM7OztBQUcxQixFQUFFTSxTQUFTOztBQUVYLEVBQUVNLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRUEsS0FBSyxJQUFJLENBQUMsR0FBRyxHQUFHO0FBQ25ELEVBQUVULE1BQU07O09BRUQsQ0FBQztBQUNSO0FBRU8sZUFBZWUsbUJBQW1CQyxNQUFjO0lBQ3JELElBQUksQ0FBQ2xCLCtDQUFRQSxDQUFDbUIsY0FBYyxFQUFFO1FBQzVCLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtJQUNBLE1BQU1DLFFBQVEsSUFBSXZCLHFFQUFrQkEsQ0FBQ0UsK0NBQVFBLENBQUNtQixjQUFjO0lBQzVELE1BQU1HLFFBQVFELE1BQU1FLGtCQUFrQixDQUFDO1FBQUVELE9BQU90QiwrQ0FBUUEsQ0FBQ3dCLFlBQVk7SUFBQztJQUN0RSxNQUFNQyxTQUFTLE1BQU1ILE1BQU1JLGVBQWUsQ0FBQztRQUFFQyxVQUFVO1lBQUM7Z0JBQUVaLE1BQU07Z0JBQVFhLE9BQU87b0JBQUM7d0JBQUVuQixNQUFNUztvQkFBTztpQkFBRTtZQUFBO1NBQUU7SUFBQztJQUNwRyxNQUFNVCxPQUFPZ0IsT0FBT0ksUUFBUSxDQUFDcEIsSUFBSTtJQUNqQyxPQUFPQTtBQUNUO0FBRUEsU0FBU0ssV0FBV2dCLENBQVM7SUFDM0IsT0FBT0EsSUFBSUEsQ0FBQyxDQUFDLEVBQUUsQ0FBQ0MsV0FBVyxLQUFLRCxFQUFFbEIsS0FBSyxDQUFDLEtBQUtrQjtBQUMvQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3MtY2hhdC1uZXh0Ly4vbGliL2dlbWluaS50cz9iNjM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdvb2dsZUdlbmVyYXRpdmVBSSB9IGZyb20gXCJAZ29vZ2xlL2dlbmVyYXRpdmUtYWlcIjtcclxuaW1wb3J0IHsgU1lTVEVNX1BST01QVCwgc2V0dGluZ3MgfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkUmFnUHJvbXB0KHF1ZXJ5OiBzdHJpbmcsIHJlbGV2YW50OiB7IHRleHQ/OiBzdHJpbmcgfVtdLCBoaXN0b3J5PzogeyByb2xlOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZyB9W10pIHtcclxuICBjb25zdCBjb250ZXh0cyA9IHJlbGV2YW50Lm1hcCgoYywgaSkgPT4gYFtDb250ZXh0ICR7aSArIDF9XTpcXG4ke2MudGV4dCB8fCBcIlwifVxcbmApLmpvaW4oXCJcXG5cIik7XHJcbiAgY29uc3QgaGlzdCA9IChoaXN0b3J5IHx8IFtdKS5zbGljZSgtNSkubWFwKG0gPT4gYCR7Y2FwaXRhbGl6ZShtLnJvbGUpfTogJHttLmNvbnRlbnR9YCkuam9pbihcIlxcblwiKTtcclxuICByZXR1cm4gYCR7U1lTVEVNX1BST01QVH1cclxuXHJcbkRPQ1VNRU5UIENPTlRFWFQ6XHJcbiR7Y29udGV4dHN9XHJcblxyXG4ke2hpc3QgPyBgQ09OVkVSU0FUSU9OIEhJU1RPUlk6XFxuJHtoaXN0fVxcblxcbmAgOiBcIlwifVVTRVIgUVVFU1RJT046XHJcbiR7cXVlcnl9XHJcblxyXG5BTlNXRVI6YDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlV2l0aEdlbWluaShwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgaWYgKCFzZXR0aW5ncy5HRU1JTklfQVBJX0tFWSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiR0VNSU5JX0FQSV9LRVkgbm90IHNldFwiKTtcclxuICB9XHJcbiAgY29uc3QgZ2VuYWkgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJKHNldHRpbmdzLkdFTUlOSV9BUElfS0VZKTtcclxuICBjb25zdCBtb2RlbCA9IGdlbmFpLmdldEdlbmVyYXRpdmVNb2RlbCh7IG1vZGVsOiBzZXR0aW5ncy5HRU1JTklfTU9ERUwgfSk7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbW9kZWwuZ2VuZXJhdGVDb250ZW50KHsgY29udGVudHM6IFt7IHJvbGU6IFwidXNlclwiLCBwYXJ0czogW3sgdGV4dDogcHJvbXB0IH1dfV0gfSk7XHJcbiAgY29uc3QgdGV4dCA9IHJlc3VsdC5yZXNwb25zZS50ZXh0KCk7XHJcbiAgcmV0dXJuIHRleHQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhcGl0YWxpemUoczogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIHMgPyBzWzBdLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpIDogcztcclxufVxyXG5cclxuIl0sIm5hbWVzIjpbIkdvb2dsZUdlbmVyYXRpdmVBSSIsIlNZU1RFTV9QUk9NUFQiLCJzZXR0aW5ncyIsImJ1aWxkUmFnUHJvbXB0IiwicXVlcnkiLCJyZWxldmFudCIsImhpc3RvcnkiLCJjb250ZXh0cyIsIm1hcCIsImMiLCJpIiwidGV4dCIsImpvaW4iLCJoaXN0Iiwic2xpY2UiLCJtIiwiY2FwaXRhbGl6ZSIsInJvbGUiLCJjb250ZW50IiwiZ2VuZXJhdGVXaXRoR2VtaW5pIiwicHJvbXB0IiwiR0VNSU5JX0FQSV9LRVkiLCJFcnJvciIsImdlbmFpIiwibW9kZWwiLCJnZXRHZW5lcmF0aXZlTW9kZWwiLCJHRU1JTklfTU9ERUwiLCJyZXN1bHQiLCJnZW5lcmF0ZUNvbnRlbnQiLCJjb250ZW50cyIsInBhcnRzIiwicmVzcG9uc2UiLCJzIiwidG9VcHBlckNhc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/gemini.ts\n");

/***/ }),

/***/ "(rsc)/./lib/settings.ts":
/*!*************************!*\
  !*** ./lib/settings.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SYSTEM_PROMPT: () => (/* binding */ SYSTEM_PROMPT),\n/* harmony export */   settings: () => (/* binding */ settings)\n/* harmony export */ });\nconst settings = {\n    GEMINI_API_KEY: process.env.GEMINI_API_KEY || \"\",\n    MAX_CHUNK_SIZE: Number(process.env.MAX_CHUNK_SIZE || 1000),\n    CHUNK_OVERLAP: Number(process.env.CHUNK_OVERLAP || 200),\n    MAX_FILE_SIZE_MB: Number(process.env.MAX_FILE_SIZE_MB || 50),\n    EMBEDDING_MODEL: process.env.EMBEDDING_MODEL || \"Xenova/all-MiniLM-L6-v2\",\n    GEMINI_MODEL: process.env.GEMINI_MODEL || \"gemini-2.0-flash-exp\",\n    TEMPERATURE: Number(process.env.TEMPERATURE || 0.7),\n    MAX_OUTPUT_TOKENS: Number(process.env.MAX_OUTPUT_TOKENS || 2048),\n    ENABLE_OCR: String(process.env.ENABLE_OCR || \"true\") === \"true\",\n    ENABLE_YOUTUBE: String(process.env.ENABLE_YOUTUBE || \"true\") === \"true\"\n};\nconst SYSTEM_PROMPT = `You are a helpful assistant that answers questions based ONLY on the provided document context.\r\nIf the answer cannot be found in the provided context, clearly state that the information is not available in the document.\r\nDo not make up information or use external knowledge. Always cite which part of the document you're referencing.`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2V0dGluZ3MudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFhTyxNQUFNQSxXQUFxQjtJQUNoQ0MsZ0JBQWdCQyxRQUFRQyxHQUFHLENBQUNGLGNBQWMsSUFBSTtJQUM5Q0csZ0JBQWdCQyxPQUFPSCxRQUFRQyxHQUFHLENBQUNDLGNBQWMsSUFBSTtJQUNyREUsZUFBZUQsT0FBT0gsUUFBUUMsR0FBRyxDQUFDRyxhQUFhLElBQUk7SUFDbkRDLGtCQUFrQkYsT0FBT0gsUUFBUUMsR0FBRyxDQUFDSSxnQkFBZ0IsSUFBSTtJQUN6REMsaUJBQWlCTixRQUFRQyxHQUFHLENBQUNLLGVBQWUsSUFBSTtJQUNoREMsY0FBY1AsUUFBUUMsR0FBRyxDQUFDTSxZQUFZLElBQUk7SUFDMUNDLGFBQWFMLE9BQU9ILFFBQVFDLEdBQUcsQ0FBQ08sV0FBVyxJQUFJO0lBQy9DQyxtQkFBbUJOLE9BQU9ILFFBQVFDLEdBQUcsQ0FBQ1EsaUJBQWlCLElBQUk7SUFDM0RDLFlBQVlDLE9BQU9YLFFBQVFDLEdBQUcsQ0FBQ1MsVUFBVSxJQUFJLFlBQVk7SUFDekRFLGdCQUFnQkQsT0FBT1gsUUFBUUMsR0FBRyxDQUFDVyxjQUFjLElBQUksWUFBWTtBQUNuRSxFQUFFO0FBRUssTUFBTUMsZ0JBQWdCLENBQUM7O2dIQUVrRixDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzLWNoYXQtbmV4dC8uL2xpYi9zZXR0aW5ncy50cz8xZDcyIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIFNldHRpbmdzID0ge1xyXG4gIEdFTUlOSV9BUElfS0VZOiBzdHJpbmc7XHJcbiAgTUFYX0NIVU5LX1NJWkU6IG51bWJlcjtcclxuICBDSFVOS19PVkVSTEFQOiBudW1iZXI7XHJcbiAgTUFYX0ZJTEVfU0laRV9NQjogbnVtYmVyO1xyXG4gIEVNQkVERElOR19NT0RFTDogc3RyaW5nO1xyXG4gIEdFTUlOSV9NT0RFTDogc3RyaW5nO1xyXG4gIFRFTVBFUkFUVVJFOiBudW1iZXI7XHJcbiAgTUFYX09VVFBVVF9UT0tFTlM6IG51bWJlcjtcclxuICBFTkFCTEVfT0NSOiBib29sZWFuO1xyXG4gIEVOQUJMRV9ZT1VUVUJFOiBib29sZWFuO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzOiBTZXR0aW5ncyA9IHtcclxuICBHRU1JTklfQVBJX0tFWTogcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkgfHwgXCJcIixcclxuICBNQVhfQ0hVTktfU0laRTogTnVtYmVyKHByb2Nlc3MuZW52Lk1BWF9DSFVOS19TSVpFIHx8IDEwMDApLFxyXG4gIENIVU5LX09WRVJMQVA6IE51bWJlcihwcm9jZXNzLmVudi5DSFVOS19PVkVSTEFQIHx8IDIwMCksXHJcbiAgTUFYX0ZJTEVfU0laRV9NQjogTnVtYmVyKHByb2Nlc3MuZW52Lk1BWF9GSUxFX1NJWkVfTUIgfHwgNTApLFxyXG4gIEVNQkVERElOR19NT0RFTDogcHJvY2Vzcy5lbnYuRU1CRURESU5HX01PREVMIHx8IFwiWGVub3ZhL2FsbC1NaW5pTE0tTDYtdjJcIixcclxuICBHRU1JTklfTU9ERUw6IHByb2Nlc3MuZW52LkdFTUlOSV9NT0RFTCB8fCBcImdlbWluaS0yLjAtZmxhc2gtZXhwXCIsXHJcbiAgVEVNUEVSQVRVUkU6IE51bWJlcihwcm9jZXNzLmVudi5URU1QRVJBVFVSRSB8fCAwLjcpLFxyXG4gIE1BWF9PVVRQVVRfVE9LRU5TOiBOdW1iZXIocHJvY2Vzcy5lbnYuTUFYX09VVFBVVF9UT0tFTlMgfHwgMjA0OCksXHJcbiAgRU5BQkxFX09DUjogU3RyaW5nKHByb2Nlc3MuZW52LkVOQUJMRV9PQ1IgfHwgXCJ0cnVlXCIpID09PSBcInRydWVcIixcclxuICBFTkFCTEVfWU9VVFVCRTogU3RyaW5nKHByb2Nlc3MuZW52LkVOQUJMRV9ZT1VUVUJFIHx8IFwidHJ1ZVwiKSA9PT0gXCJ0cnVlXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgU1lTVEVNX1BST01QVCA9IGBZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCBhbnN3ZXJzIHF1ZXN0aW9ucyBiYXNlZCBPTkxZIG9uIHRoZSBwcm92aWRlZCBkb2N1bWVudCBjb250ZXh0LlxyXG5JZiB0aGUgYW5zd2VyIGNhbm5vdCBiZSBmb3VuZCBpbiB0aGUgcHJvdmlkZWQgY29udGV4dCwgY2xlYXJseSBzdGF0ZSB0aGF0IHRoZSBpbmZvcm1hdGlvbiBpcyBub3QgYXZhaWxhYmxlIGluIHRoZSBkb2N1bWVudC5cclxuRG8gbm90IG1ha2UgdXAgaW5mb3JtYXRpb24gb3IgdXNlIGV4dGVybmFsIGtub3dsZWRnZS4gQWx3YXlzIGNpdGUgd2hpY2ggcGFydCBvZiB0aGUgZG9jdW1lbnQgeW91J3JlIHJlZmVyZW5jaW5nLmA7XHJcblxyXG4iXSwibmFtZXMiOlsic2V0dGluZ3MiLCJHRU1JTklfQVBJX0tFWSIsInByb2Nlc3MiLCJlbnYiLCJNQVhfQ0hVTktfU0laRSIsIk51bWJlciIsIkNIVU5LX09WRVJMQVAiLCJNQVhfRklMRV9TSVpFX01CIiwiRU1CRURESU5HX01PREVMIiwiR0VNSU5JX01PREVMIiwiVEVNUEVSQVRVUkUiLCJNQVhfT1VUUFVUX1RPS0VOUyIsIkVOQUJMRV9PQ1IiLCJTdHJpbmciLCJFTkFCTEVfWU9VVFVCRSIsIlNZU1RFTV9QUk9NUFQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/settings.ts\n");

/***/ }),

/***/ "(rsc)/./lib/textChunker.ts":
/*!****************************!*\
  !*** ./lib/textChunker.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TextChunker: () => (/* binding */ TextChunker)\n/* harmony export */ });\nclass TextChunker {\n    constructor(chunkSize = 1000, overlap = 200){\n        this.chunkSize = chunkSize;\n        this.overlap = overlap;\n    }\n    chunkBySentences(text, maxChunkSize) {\n        const limit = maxChunkSize ?? this.chunkSize;\n        const sentences = text.replace(/!/g, \".\").replace(/\\?/g, \".\").split(\".\").map((s)=>s.trim()).filter(Boolean);\n        const chunks = [];\n        let current = [];\n        let size = 0;\n        let id = 0;\n        for (const sentence of sentences){\n            const sentSize = sentence.split(/\\s+/).length;\n            if (size + sentSize > limit && current.length) {\n                chunks.push({\n                    id,\n                    text: current.join(\". \") + \".\",\n                    sentence_count: current.length,\n                    token_count: size\n                });\n                id += 1;\n                if (this.overlap > 0 && current.length > 1) {\n                    current = current.slice(-1);\n                    size = current[0].split(/\\s+/).length;\n                } else {\n                    current = [];\n                    size = 0;\n                }\n            }\n            current.push(sentence);\n            size += sentSize;\n        }\n        if (current.length) {\n            chunks.push({\n                id,\n                text: current.join(\". \") + \".\",\n                sentence_count: current.length,\n                token_count: size\n            });\n        }\n        return chunks;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdGV4dENodW5rZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQVNPLE1BQU1BO0lBSVhDLFlBQVlDLFlBQW9CLElBQUksRUFBRUMsVUFBa0IsR0FBRyxDQUFFO1FBQzNELElBQUksQ0FBQ0QsU0FBUyxHQUFHQTtRQUNqQixJQUFJLENBQUNDLE9BQU8sR0FBR0E7SUFDakI7SUFFQUMsaUJBQWlCQyxJQUFZLEVBQUVDLFlBQXFCLEVBQVc7UUFDN0QsTUFBTUMsUUFBUUQsZ0JBQWdCLElBQUksQ0FBQ0osU0FBUztRQUM1QyxNQUFNTSxZQUFZSCxLQUFLSSxPQUFPLENBQUMsTUFBTSxLQUFLQSxPQUFPLENBQUMsT0FBTyxLQUFLQyxLQUFLLENBQUMsS0FBS0MsR0FBRyxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxJQUFJLElBQUlDLE1BQU0sQ0FBQ0M7UUFDbkcsTUFBTUMsU0FBa0IsRUFBRTtRQUMxQixJQUFJQyxVQUFvQixFQUFFO1FBQzFCLElBQUlDLE9BQU87UUFDWCxJQUFJQyxLQUFLO1FBRVQsS0FBSyxNQUFNQyxZQUFZWixVQUFXO1lBQ2hDLE1BQU1hLFdBQVdELFNBQVNWLEtBQUssQ0FBQyxPQUFPWSxNQUFNO1lBQzdDLElBQUlKLE9BQU9HLFdBQVdkLFNBQVNVLFFBQVFLLE1BQU0sRUFBRTtnQkFDN0NOLE9BQU9PLElBQUksQ0FBQztvQkFBRUo7b0JBQUlkLE1BQU1ZLFFBQVFPLElBQUksQ0FBQyxRQUFRO29CQUFLQyxnQkFBZ0JSLFFBQVFLLE1BQU07b0JBQUVJLGFBQWFSO2dCQUFLO2dCQUNwR0MsTUFBTTtnQkFDTixJQUFJLElBQUksQ0FBQ2hCLE9BQU8sR0FBRyxLQUFLYyxRQUFRSyxNQUFNLEdBQUcsR0FBRztvQkFDMUNMLFVBQVVBLFFBQVFVLEtBQUssQ0FBQyxDQUFDO29CQUN6QlQsT0FBT0QsT0FBTyxDQUFDLEVBQUUsQ0FBQ1AsS0FBSyxDQUFDLE9BQU9ZLE1BQU07Z0JBQ3ZDLE9BQU87b0JBQ0xMLFVBQVUsRUFBRTtvQkFDWkMsT0FBTztnQkFDVDtZQUNGO1lBQ0FELFFBQVFNLElBQUksQ0FBQ0g7WUFDYkYsUUFBUUc7UUFDVjtRQUNBLElBQUlKLFFBQVFLLE1BQU0sRUFBRTtZQUNsQk4sT0FBT08sSUFBSSxDQUFDO2dCQUFFSjtnQkFBSWQsTUFBTVksUUFBUU8sSUFBSSxDQUFDLFFBQVE7Z0JBQUtDLGdCQUFnQlIsUUFBUUssTUFBTTtnQkFBRUksYUFBYVI7WUFBSztRQUN0RztRQUNBLE9BQU9GO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3MtY2hhdC1uZXh0Ly4vbGliL3RleHRDaHVua2VyLnRzPzc4NDAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHR5cGUgQ2h1bmsgPSB7XHJcbiAgaWQ6IG51bWJlcjtcclxuICB0ZXh0OiBzdHJpbmc7XHJcbiAgdG9rZW5fY291bnQ/OiBudW1iZXI7XHJcbiAgc2VudGVuY2VfY291bnQ/OiBudW1iZXI7XHJcbiAgc3RhcnRfcG9zPzogbnVtYmVyO1xyXG4gIGVuZF9wb3M/OiBudW1iZXI7XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgVGV4dENodW5rZXIge1xyXG4gIHByaXZhdGUgY2h1bmtTaXplOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBvdmVybGFwOiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNodW5rU2l6ZTogbnVtYmVyID0gMTAwMCwgb3ZlcmxhcDogbnVtYmVyID0gMjAwKSB7XHJcbiAgICB0aGlzLmNodW5rU2l6ZSA9IGNodW5rU2l6ZTtcclxuICAgIHRoaXMub3ZlcmxhcCA9IG92ZXJsYXA7XHJcbiAgfVxyXG5cclxuICBjaHVua0J5U2VudGVuY2VzKHRleHQ6IHN0cmluZywgbWF4Q2h1bmtTaXplPzogbnVtYmVyKTogQ2h1bmtbXSB7XHJcbiAgICBjb25zdCBsaW1pdCA9IG1heENodW5rU2l6ZSA/PyB0aGlzLmNodW5rU2l6ZTtcclxuICAgIGNvbnN0IHNlbnRlbmNlcyA9IHRleHQucmVwbGFjZSgvIS9nLCBcIi5cIikucmVwbGFjZSgvXFw/L2csIFwiLlwiKS5zcGxpdChcIi5cIikubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihCb29sZWFuKTtcclxuICAgIGNvbnN0IGNodW5rczogQ2h1bmtbXSA9IFtdO1xyXG4gICAgbGV0IGN1cnJlbnQ6IHN0cmluZ1tdID0gW107XHJcbiAgICBsZXQgc2l6ZSA9IDA7XHJcbiAgICBsZXQgaWQgPSAwO1xyXG5cclxuICAgIGZvciAoY29uc3Qgc2VudGVuY2Ugb2Ygc2VudGVuY2VzKSB7XHJcbiAgICAgIGNvbnN0IHNlbnRTaXplID0gc2VudGVuY2Uuc3BsaXQoL1xccysvKS5sZW5ndGg7XHJcbiAgICAgIGlmIChzaXplICsgc2VudFNpemUgPiBsaW1pdCAmJiBjdXJyZW50Lmxlbmd0aCkge1xyXG4gICAgICAgIGNodW5rcy5wdXNoKHsgaWQsIHRleHQ6IGN1cnJlbnQuam9pbignLiAnKSArICcuJywgc2VudGVuY2VfY291bnQ6IGN1cnJlbnQubGVuZ3RoLCB0b2tlbl9jb3VudDogc2l6ZSB9KTtcclxuICAgICAgICBpZCArPSAxO1xyXG4gICAgICAgIGlmICh0aGlzLm92ZXJsYXAgPiAwICYmIGN1cnJlbnQubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuc2xpY2UoLTEpO1xyXG4gICAgICAgICAgc2l6ZSA9IGN1cnJlbnRbMF0uc3BsaXQoL1xccysvKS5sZW5ndGg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGN1cnJlbnQgPSBbXTtcclxuICAgICAgICAgIHNpemUgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjdXJyZW50LnB1c2goc2VudGVuY2UpO1xyXG4gICAgICBzaXplICs9IHNlbnRTaXplO1xyXG4gICAgfVxyXG4gICAgaWYgKGN1cnJlbnQubGVuZ3RoKSB7XHJcbiAgICAgIGNodW5rcy5wdXNoKHsgaWQsIHRleHQ6IGN1cnJlbnQuam9pbignLiAnKSArICcuJywgc2VudGVuY2VfY291bnQ6IGN1cnJlbnQubGVuZ3RoLCB0b2tlbl9jb3VudDogc2l6ZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBjaHVua3M7XHJcbiAgfVxyXG59XHJcblxyXG4iXSwibmFtZXMiOlsiVGV4dENodW5rZXIiLCJjb25zdHJ1Y3RvciIsImNodW5rU2l6ZSIsIm92ZXJsYXAiLCJjaHVua0J5U2VudGVuY2VzIiwidGV4dCIsIm1heENodW5rU2l6ZSIsImxpbWl0Iiwic2VudGVuY2VzIiwicmVwbGFjZSIsInNwbGl0IiwibWFwIiwicyIsInRyaW0iLCJmaWx0ZXIiLCJCb29sZWFuIiwiY2h1bmtzIiwiY3VycmVudCIsInNpemUiLCJpZCIsInNlbnRlbmNlIiwic2VudFNpemUiLCJsZW5ndGgiLCJwdXNoIiwiam9pbiIsInNlbnRlbmNlX2NvdW50IiwidG9rZW5fY291bnQiLCJzbGljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/textChunker.ts\n");

/***/ }),

/***/ "(rsc)/./lib/vectorStore.ts":
/*!****************************!*\
  !*** ./lib/vectorStore.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VectorStore: () => (/* binding */ VectorStore)\n/* harmony export */ });\n/* harmony import */ var _xenova_transformers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @xenova/transformers */ \"(rsc)/./node_modules/@xenova/transformers/src/transformers.js\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass VectorStore {\n    constructor(modelName, dbPath){\n        this.chunks = [];\n        this.embeddings = [];\n        this.embedderPromise = null;\n        this.db = null;\n        this.modelName = modelName;\n        this.useSqlite = Boolean(dbPath);\n        if (dbPath) {\n            this.db = new (better_sqlite3__WEBPACK_IMPORTED_MODULE_1___default())(dbPath);\n            this.initDb();\n            this.loadFromDb();\n        }\n    }\n    initDb() {\n        if (!this.db) return;\n        this.db.exec(`\r\n      CREATE TABLE IF NOT EXISTS chunks (\r\n        id INTEGER PRIMARY KEY,\r\n        text TEXT NOT NULL\r\n      );\r\n      CREATE TABLE IF NOT EXISTS embeddings (\r\n        chunk_id INTEGER PRIMARY KEY,\r\n        vector BLOB NOT NULL,\r\n        FOREIGN KEY(chunk_id) REFERENCES chunks(id) ON DELETE CASCADE\r\n      );\r\n    `);\n    }\n    loadFromDb() {\n        if (!this.db) return;\n        const rows = this.db.prepare(\"SELECT c.id, c.text, e.vector FROM chunks c JOIN embeddings e ON e.chunk_id = c.id ORDER BY c.id\").all();\n        this.chunks = rows.map((r)=>({\n                id: r.id,\n                text: r.text\n            }));\n        this.embeddings = rows.map((r)=>new Float32Array(Buffer.from(r.vector).buffer));\n    }\n    async getEmbedder() {\n        if (!this.embedderPromise) {\n            const model = this.modelName.includes(\"/\") ? this.modelName : `Xenova/${this.modelName}`;\n            this.embedderPromise = (0,_xenova_transformers__WEBPACK_IMPORTED_MODULE_0__.pipeline)(\"feature-extraction\", model);\n        }\n        return this.embedderPromise;\n    }\n    async addDocuments(chunks) {\n        if (!chunks.length) return;\n        const embedder = await this.getEmbedder();\n        const texts = chunks.map((c)=>c.text);\n        const outputs = await embedder(texts, {\n            pooling: \"mean\",\n            normalize: true\n        });\n        const vectors = outputs.tolist().map((row)=>new Float32Array(row));\n        if (this.db) {\n            const insertChunk = this.db.prepare(\"INSERT INTO chunks (id, text) VALUES (?, ?)\");\n            const insertEmbedding = this.db.prepare(\"INSERT INTO embeddings (chunk_id, vector) VALUES (?, ?)\");\n            const trx = this.db.transaction((pairs)=>{\n                for (const { chunk, vector } of pairs){\n                    insertChunk.run(chunk.id, chunk.text);\n                    insertEmbedding.run(chunk.id, Buffer.from(vector.buffer));\n                }\n            });\n            const pairs = chunks.map((chunk, i)=>({\n                    chunk,\n                    vector: vectors[i]\n                }));\n            trx(pairs);\n            this.loadFromDb();\n        } else {\n            this.chunks.push(...chunks);\n            this.embeddings.push(...vectors);\n        }\n    }\n    async search(query, topK = 5) {\n        if (this.chunks.length === 0) return [];\n        const embedder = await this.getEmbedder();\n        const out = await embedder(query, {\n            pooling: \"mean\",\n            normalize: true\n        });\n        const q = new Float32Array(out.tolist()[0]);\n        const scores = this.embeddings.map((v)=>cosineSimilarity(q, v));\n        const indices = scores.map((s, i)=>[\n                s,\n                i\n            ]).sort((a, b)=>b[0] - a[0]).slice(0, Math.min(topK, scores.length));\n        return indices.map(([score, i])=>({\n                chunk: this.chunks[i],\n                score\n            }));\n    }\n    clear() {\n        this.chunks = [];\n        this.embeddings = [];\n        if (this.db) {\n            this.db.exec(\"DELETE FROM embeddings; DELETE FROM chunks;\");\n        }\n    }\n    getStats() {\n        return {\n            total_chunks: this.chunks.length,\n            dimension: this.embeddings[0]?.length || 0,\n            model_name: this.modelName,\n            index_size: this.embeddings.length\n        };\n    }\n}\nfunction cosineSimilarity(a, b) {\n    let dot = 0;\n    let na = 0;\n    let nb = 0;\n    for(let i = 0; i < a.length && i < b.length; i++){\n        dot += a[i] * b[i];\n        na += a[i] * a[i];\n        nb += b[i] * b[i];\n    }\n    if (na === 0 || nb === 0) return 0;\n    return dot / (Math.sqrt(na) * Math.sqrt(nb));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixJQUFJLENBQUNDLFVBQVUsR0FBRyxFQUFFO1FBQ3BCLElBQUksSUFBSSxDQUFDRSxFQUFFLEVBQUU7WUFDWCxJQUFJLENBQUNBLEVBQUUsQ0FBQ0ssSUFBSSxDQUFDO1FBQ2Y7SUFDRjtJQUVBc0QsV0FBVztRQUNULE9BQU87WUFDTEMsY0FBYyxJQUFJLENBQUMvRCxNQUFNLENBQUN5QixNQUFNO1lBQ2hDdUMsV0FBVyxJQUFJLENBQUMvRCxVQUFVLENBQUMsRUFBRSxFQUFFd0IsVUFBVTtZQUN6Q3dDLFlBQVksSUFBSSxDQUFDbkUsU0FBUztZQUMxQm9FLFlBQVksSUFBSSxDQUFDakUsVUFBVSxDQUFDd0IsTUFBTTtRQUNwQztJQUNGO0FBQ0Y7QUFFQSxTQUFTMEIsaUJBQWlCSSxDQUFlLEVBQUVDLENBQWU7SUFDeEQsSUFBSVcsTUFBTTtJQUNWLElBQUlDLEtBQUs7SUFDVCxJQUFJQyxLQUFLO0lBQ1QsSUFBSyxJQUFJM0IsSUFBSSxHQUFHQSxJQUFJYSxFQUFFOUIsTUFBTSxJQUFJaUIsSUFBSWMsRUFBRS9CLE1BQU0sRUFBRWlCLElBQUs7UUFDakR5QixPQUFPWixDQUFDLENBQUNiLEVBQUUsR0FBR2MsQ0FBQyxDQUFDZCxFQUFFO1FBQ2xCMEIsTUFBTWIsQ0FBQyxDQUFDYixFQUFFLEdBQUdhLENBQUMsQ0FBQ2IsRUFBRTtRQUNqQjJCLE1BQU1iLENBQUMsQ0FBQ2QsRUFBRSxHQUFHYyxDQUFDLENBQUNkLEVBQUU7SUFDbkI7SUFDQSxJQUFJMEIsT0FBTyxLQUFLQyxPQUFPLEdBQUcsT0FBTztJQUNqQyxPQUFPRixNQUFPVCxDQUFBQSxLQUFLWSxJQUFJLENBQUNGLE1BQU1WLEtBQUtZLElBQUksQ0FBQ0QsR0FBRTtBQUM1QyIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3MtY2hhdC1uZXh0Ly4vbGliL3ZlY3RvclN0b3JlLnRzPzQzMzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGlwZWxpbmUgfSBmcm9tIFwiQHhlbm92YS90cmFuc2Zvcm1lcnNcIjtcclxuaW1wb3J0IHR5cGUgeyBDaHVuayB9IGZyb20gXCIuL3RleHRDaHVua2VyXCI7XHJcbmltcG9ydCBEYXRhYmFzZSBmcm9tIFwiYmV0dGVyLXNxbGl0ZTNcIjtcclxuXHJcbnR5cGUgRW1iZWRkaW5nID0gRmxvYXQzMkFycmF5O1xyXG5cclxuZXhwb3J0IGNsYXNzIFZlY3RvclN0b3JlIHtcclxuICBwcml2YXRlIGNodW5rczogQ2h1bmtbXSA9IFtdO1xyXG4gIHByaXZhdGUgZW1iZWRkaW5nczogRW1iZWRkaW5nW10gPSBbXTtcclxuICBwcml2YXRlIGVtYmVkZGVyUHJvbWlzZTogUHJvbWlzZTxhbnk+IHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBtb2RlbE5hbWU6IHN0cmluZztcclxuICBwcml2YXRlIGRiOiBEYXRhYmFzZS5EYXRhYmFzZSB8IG51bGwgPSBudWxsO1xyXG4gIHByaXZhdGUgdXNlU3FsaXRlOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihtb2RlbE5hbWU6IHN0cmluZywgZGJQYXRoPzogc3RyaW5nKSB7XHJcbiAgICB0aGlzLm1vZGVsTmFtZSA9IG1vZGVsTmFtZTtcclxuICAgIHRoaXMudXNlU3FsaXRlID0gQm9vbGVhbihkYlBhdGgpO1xyXG4gICAgaWYgKGRiUGF0aCkge1xyXG4gICAgICB0aGlzLmRiID0gbmV3IERhdGFiYXNlKGRiUGF0aCk7XHJcbiAgICAgIHRoaXMuaW5pdERiKCk7XHJcbiAgICAgIHRoaXMubG9hZEZyb21EYigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0RGIoKSB7XHJcbiAgICBpZiAoIXRoaXMuZGIpIHJldHVybjtcclxuICAgIHRoaXMuZGIuZXhlYyhgXHJcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGNodW5rcyAoXHJcbiAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSxcclxuICAgICAgICB0ZXh0IFRFWFQgTk9UIE5VTExcclxuICAgICAgKTtcclxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgZW1iZWRkaW5ncyAoXHJcbiAgICAgICAgY2h1bmtfaWQgSU5URUdFUiBQUklNQVJZIEtFWSxcclxuICAgICAgICB2ZWN0b3IgQkxPQiBOT1QgTlVMTCxcclxuICAgICAgICBGT1JFSUdOIEtFWShjaHVua19pZCkgUkVGRVJFTkNFUyBjaHVua3MoaWQpIE9OIERFTEVURSBDQVNDQURFXHJcbiAgICAgICk7XHJcbiAgICBgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbG9hZEZyb21EYigpIHtcclxuICAgIGlmICghdGhpcy5kYikgcmV0dXJuO1xyXG4gICAgY29uc3Qgcm93cyA9IHRoaXMuZGIucHJlcGFyZShcIlNFTEVDVCBjLmlkLCBjLnRleHQsIGUudmVjdG9yIEZST00gY2h1bmtzIGMgSk9JTiBlbWJlZGRpbmdzIGUgT04gZS5jaHVua19pZCA9IGMuaWQgT1JERVIgQlkgYy5pZFwiKS5hbGwoKTtcclxuICAgIHRoaXMuY2h1bmtzID0gcm93cy5tYXAoKHI6IGFueSkgPT4gKHsgaWQ6IHIuaWQsIHRleHQ6IHIudGV4dCB9KSk7XHJcbiAgICB0aGlzLmVtYmVkZGluZ3MgPSByb3dzLm1hcCgocjogYW55KSA9PiBuZXcgRmxvYXQzMkFycmF5KEJ1ZmZlci5mcm9tKHIudmVjdG9yKS5idWZmZXIpKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgZ2V0RW1iZWRkZXIoKSB7XHJcbiAgICBpZiAoIXRoaXMuZW1iZWRkZXJQcm9taXNlKSB7XHJcbiAgICAgIGNvbnN0IG1vZGVsID0gdGhpcy5tb2RlbE5hbWUuaW5jbHVkZXMoJy8nKSA/IHRoaXMubW9kZWxOYW1lIDogYFhlbm92YS8ke3RoaXMubW9kZWxOYW1lfWA7XHJcbiAgICAgIHRoaXMuZW1iZWRkZXJQcm9taXNlID0gcGlwZWxpbmUoXCJmZWF0dXJlLWV4dHJhY3Rpb25cIiwgbW9kZWwpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZW1iZWRkZXJQcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgYWRkRG9jdW1lbnRzKGNodW5rczogQ2h1bmtbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgaWYgKCFjaHVua3MubGVuZ3RoKSByZXR1cm47XHJcbiAgICBjb25zdCBlbWJlZGRlciA9IGF3YWl0IHRoaXMuZ2V0RW1iZWRkZXIoKTtcclxuICAgIGNvbnN0IHRleHRzID0gY2h1bmtzLm1hcChjID0+IGMudGV4dCk7XHJcbiAgICBjb25zdCBvdXRwdXRzID0gYXdhaXQgZW1iZWRkZXIodGV4dHMsIHsgcG9vbGluZzogXCJtZWFuXCIsIG5vcm1hbGl6ZTogdHJ1ZSB9KTtcclxuICAgIGNvbnN0IHZlY3RvcnM6IEVtYmVkZGluZ1tdID0gb3V0cHV0cy50b2xpc3QoKS5tYXAoKHJvdzogbnVtYmVyW10pID0+IG5ldyBGbG9hdDMyQXJyYXkocm93KSk7XHJcbiAgICBpZiAodGhpcy5kYikge1xyXG4gICAgICBjb25zdCBpbnNlcnRDaHVuayA9IHRoaXMuZGIucHJlcGFyZShcIklOU0VSVCBJTlRPIGNodW5rcyAoaWQsIHRleHQpIFZBTFVFUyAoPywgPylcIik7XHJcbiAgICAgIGNvbnN0IGluc2VydEVtYmVkZGluZyA9IHRoaXMuZGIucHJlcGFyZShcIklOU0VSVCBJTlRPIGVtYmVkZGluZ3MgKGNodW5rX2lkLCB2ZWN0b3IpIFZBTFVFUyAoPywgPylcIik7XHJcbiAgICAgIGNvbnN0IHRyeCA9IHRoaXMuZGIudHJhbnNhY3Rpb24oKHBhaXJzOiB7IGNodW5rOiBDaHVuazsgdmVjdG9yOiBFbWJlZGRpbmcgfVtdKSA9PiB7XHJcbiAgICAgICAgZm9yIChjb25zdCB7IGNodW5rLCB2ZWN0b3IgfSBvZiBwYWlycykge1xyXG4gICAgICAgICAgaW5zZXJ0Q2h1bmsucnVuKGNodW5rLmlkLCBjaHVuay50ZXh0KTtcclxuICAgICAgICAgIGluc2VydEVtYmVkZGluZy5ydW4oY2h1bmsuaWQsIEJ1ZmZlci5mcm9tKHZlY3Rvci5idWZmZXIpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCBwYWlycyA9IGNodW5rcy5tYXAoKGNodW5rLCBpKSA9PiAoeyBjaHVuaywgdmVjdG9yOiB2ZWN0b3JzW2ldIH0pKTtcclxuICAgICAgdHJ4KHBhaXJzKTtcclxuICAgICAgdGhpcy5sb2FkRnJvbURiKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNodW5rcy5wdXNoKC4uLmNodW5rcyk7XHJcbiAgICAgIHRoaXMuZW1iZWRkaW5ncy5wdXNoKC4uLnZlY3RvcnMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2VhcmNoKHF1ZXJ5OiBzdHJpbmcsIHRvcEs6IG51bWJlciA9IDUpOiBQcm9taXNlPHsgY2h1bms6IENodW5rOyBzY29yZTogbnVtYmVyIH1bXT4ge1xyXG4gICAgaWYgKHRoaXMuY2h1bmtzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xyXG4gICAgY29uc3QgZW1iZWRkZXIgPSBhd2FpdCB0aGlzLmdldEVtYmVkZGVyKCk7XHJcbiAgICBjb25zdCBvdXQgPSBhd2FpdCBlbWJlZGRlcihxdWVyeSwgeyBwb29saW5nOiBcIm1lYW5cIiwgbm9ybWFsaXplOiB0cnVlIH0pO1xyXG4gICAgY29uc3QgcSA9IG5ldyBGbG9hdDMyQXJyYXkob3V0LnRvbGlzdCgpWzBdKTtcclxuICAgIGNvbnN0IHNjb3JlcyA9IHRoaXMuZW1iZWRkaW5ncy5tYXAoKHYpID0+IGNvc2luZVNpbWlsYXJpdHkocSwgdikpO1xyXG4gICAgY29uc3QgaW5kaWNlcyA9IHNjb3Jlcy5tYXAoKHMsIGkpID0+IFtzLCBpXSBhcyBjb25zdCkuc29ydCgoYSwgYikgPT4gYlswXSAtIGFbMF0pLnNsaWNlKDAsIE1hdGgubWluKHRvcEssIHNjb3Jlcy5sZW5ndGgpKTtcclxuICAgIHJldHVybiBpbmRpY2VzLm1hcCgoW3Njb3JlLCBpXSkgPT4gKHsgY2h1bms6IHRoaXMuY2h1bmtzW2ldLCBzY29yZSB9KSk7XHJcbiAgfVxyXG5cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMuY2h1bmtzID0gW107XHJcbiAgICB0aGlzLmVtYmVkZGluZ3MgPSBbXTtcclxuICAgIGlmICh0aGlzLmRiKSB7XHJcbiAgICAgIHRoaXMuZGIuZXhlYyhcIkRFTEVURSBGUk9NIGVtYmVkZGluZ3M7IERFTEVURSBGUk9NIGNodW5rcztcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRTdGF0cygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRvdGFsX2NodW5rczogdGhpcy5jaHVua3MubGVuZ3RoLFxyXG4gICAgICBkaW1lbnNpb246IHRoaXMuZW1iZWRkaW5nc1swXT8ubGVuZ3RoIHx8IDAsXHJcbiAgICAgIG1vZGVsX25hbWU6IHRoaXMubW9kZWxOYW1lLFxyXG4gICAgICBpbmRleF9zaXplOiB0aGlzLmVtYmVkZGluZ3MubGVuZ3RoLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvc2luZVNpbWlsYXJpdHkoYTogRmxvYXQzMkFycmF5LCBiOiBGbG9hdDMyQXJyYXkpOiBudW1iZXIge1xyXG4gIGxldCBkb3QgPSAwO1xyXG4gIGxldCBuYSA9IDA7XHJcbiAgbGV0IG5iID0gMDtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoICYmIGkgPCBiLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBkb3QgKz0gYVtpXSAqIGJbaV07XHJcbiAgICBuYSArPSBhW2ldICogYVtpXTtcclxuICAgIG5iICs9IGJbaV0gKiBiW2ldO1xyXG4gIH1cclxuICBpZiAobmEgPT09IDAgfHwgbmIgPT09IDApIHJldHVybiAwO1xyXG4gIHJldHVybiBkb3QgLyAoTWF0aC5zcXJ0KG5hKSAqIE1hdGguc3FydChuYikpO1xyXG59XHJcblxyXG4iXSwibmFtZXMiOlsicGlwZWxpbmUiLCJEYXRhYmFzZSIsIlZlY3RvclN0b3JlIiwiY29uc3RydWN0b3IiLCJtb2RlbE5hbWUiLCJkYlBhdGgiLCJjaHVua3MiLCJlbWJlZGRpbmdzIiwiZW1iZWRkZXJQcm9taXNlIiwiZGIiLCJ1c2VTcWxpdGUiLCJCb29sZWFuIiwiaW5pdERiIiwibG9hZEZyb21EYiIsImV4ZWMiLCJyb3dzIiwicHJlcGFyZSIsImFsbCIsIm1hcCIsInIiLCJpZCIsInRleHQiLCJGbG9hdDMyQXJyYXkiLCJCdWZmZXIiLCJmcm9tIiwidmVjdG9yIiwiYnVmZmVyIiwiZ2V0RW1iZWRkZXIiLCJtb2RlbCIsImluY2x1ZGVzIiwiYWRkRG9jdW1lbnRzIiwibGVuZ3RoIiwiZW1iZWRkZXIiLCJ0ZXh0cyIsImMiLCJvdXRwdXRzIiwicG9vbGluZyIsIm5vcm1hbGl6ZSIsInZlY3RvcnMiLCJ0b2xpc3QiLCJyb3ciLCJpbnNlcnRDaHVuayIsImluc2VydEVtYmVkZGluZyIsInRyeCIsInRyYW5zYWN0aW9uIiwicGFpcnMiLCJjaHVuayIsInJ1biIsImkiLCJwdXNoIiwic2VhcmNoIiwicXVlcnkiLCJ0b3BLIiwib3V0IiwicSIsInNjb3JlcyIsInYiLCJjb3NpbmVTaW1pbGFyaXR5IiwiaW5kaWNlcyIsInMiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsIk1hdGgiLCJtaW4iLCJzY29yZSIsImNsZWFyIiwiZ2V0U3RhdHMiLCJ0b3RhbF9jaHVua3MiLCJkaW1lbnNpb24iLCJtb2RlbF9uYW1lIiwiaW5kZXhfc2l6ZSIsImRvdCIsIm5hIiwibmIiLCJzcXJ0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/vectorStore.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@xenova","vendor-chunks/onnxruntime-web","vendor-chunks/@huggingface","vendor-chunks/onnxruntime-common","vendor-chunks/@google"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckomar%5CDesktop%5Cdocs-chat-master%5Cdocs-chat-master&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();